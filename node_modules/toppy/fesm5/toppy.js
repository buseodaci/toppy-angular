import { __rest, __assign, __spread, __extends, __read, __values } from 'tslib';
import { TemplateRef, ChangeDetectionStrategy, ChangeDetectorRef, Component, ComponentFactoryResolver, ElementRef, Injector, ViewChild, ViewContainerRef, ApplicationRef, Injectable, defineInjectable, inject, INJECTOR, NgModule } from '@angular/core';
import { Subject, animationFrameScheduler, fromEvent, merge } from 'rxjs';
import { filter, map, startWith, takeUntil, tap, debounceTime, distinctUntilChanged, observeOn, skipWhile } from 'rxjs/operators';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @enum {string} */
var p = {
    TOP: 't',
    LEFT: 'l',
    RIGHT: 'r',
    BOTTOM: 'b',
    TOP_LEFT: 'tl',
    TOP_RIGHT: 'tr',
    BOTTOM_LEFT: 'bl',
    BOTTOM_RIGHT: 'br',
};
/** @enum {string} */
var o = {
    LEFT_TOP: 'lt',
    RIGHT_TOP: 'rt',
    LEFT_BOTTOM: 'lb',
    RIGHT_BOTTOM: 'rb',
};
/** @enum {string} */
var i = {
    CENTER: 'c',
};
/** @type {?} */
var OutsidePlacement = __assign({}, p, o);
/** @type {?} */
var InsidePlacement = __assign({}, p, i);
/** @enum {string} */
var SlidePlacement = {
    LEFT: 'l',
    RIGHT: 'r',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @abstract
 */
var /**
 * @abstract
 */
ToppyPosition = /** @class */ (function () {
    function ToppyPosition() {
        this.config = {};
    }
    /**
     * @return {?}
     */
    ToppyPosition.prototype.getClassName = /**
     * @return {?}
     */
    function () {
        return this.constructor.name.replace('Pos', '-pos').toLowerCase();
    };
    /**
     * @param {?} config
     * @return {?}
     */
    ToppyPosition.prototype.updateConfig = /**
     * @param {?} config
     * @return {?}
     */
    function (config) {
        this.config = __assign({}, this.config, config);
    };
    /**
     * @param {?} tid
     * @return {?}
     */
    ToppyPosition.prototype.init = /**
     * @param {?} tid
     * @return {?}
     */
    function (tid) { };
    return ToppyPosition;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var FullscreenPosition = /** @class */ (function (_super) {
    __extends(FullscreenPosition, _super);
    function FullscreenPosition() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @return {?}
     */
    FullscreenPosition.prototype.getPositions = /**
     * @return {?}
     */
    function () {
        return { top: 0, left: 0, width: '100%', height: '100%', position: 'fixed' };
    };
    return FullscreenPosition;
}(ToppyPosition));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @param {?} data
 * @param {?=} props
 * @return {?}
 */
function getContent(data, props) {
    if (props === void 0) { props = {}; }
    /** @type {?} */
    var type = "c" /* COMPONENT */;
    if (typeof data === 'string' && props['hasHTML'])
        type = "h" /* HTML */;
    else if (typeof data === 'string')
        type = "s" /* STRING */;
    else if (data instanceof TemplateRef)
        type = "t" /* TEMPLATE */;
    return { data: data, type: type, props: props };
}
/**
 * @return {?}
 */
function createId() {
    return Math.random()
        .toString(36)
        .substr(2, 5);
}
/* html dom utils */
/**
 * @param {?} method
 * @param {?} cls
 * @param {?=} target
 * @return {?}
 */
function cssClass(method, cls, target) {
    if (target === void 0) { target = 'body'; }
    var _a;
    (_a = document.querySelector(target).classList)[method].apply(_a, __spread(cls));
}
/**
 * @param {?} styleObj
 * @return {?}
 */
function toCss(styleObj) {
    return Object.keys(styleObj)
        .map(function (x) { return x + ":" + styleObj[x] + (typeof styleObj[x] === 'number' ? 'px' : ''); })
        .join(';');
}
/**
 * @param {?} max
 * @param {?} percentage
 * @return {?}
 */
function percentToCss(max, percentage) {
    /** @type {?} */
    var number = Number(percentage.slice(0, -1));
    if (number > 100) {
        number = 100;
    }
    return "calc(" + max + "px - " + (100 - number) + "%)";
}
/**
 * @param {?} src
 * @param {?} host
 * @param {?} key
 * @param {?} value
 * @return {?}
 */
function setWH(src, host, key, value) {
    if (typeof value === 'number') {
        host[key] = value = Math.abs(value);
    }
    if (typeof value === 'string' && value.endsWith('%')) {
        value = percentToCss(src[key], value);
    }
    return value;
}
/** @type {?} */
var BodyEl = document.querySelector('body');
/* events */
var /* events */
BusClass = /** @class */ (function () {
    function BusClass() {
        this._e = new Subject();
    }
    /**
     * @param {?} from
     * @param {?} name
     * @param {?=} data
     * @return {?}
     */
    BusClass.prototype.send = /**
     * @param {?} from
     * @param {?} name
     * @param {?=} data
     * @return {?}
     */
    function (from, name, data) {
        if (data === void 0) { data = null; }
        this._e.next({ from: from, name: name, data: data });
    };
    /**
     * @param {?} from
     * @param {?} name
     * @return {?}
     */
    BusClass.prototype.listen = /**
     * @param {?} from
     * @param {?} name
     * @return {?}
     */
    function (from, name) {
        return this._e.asObservable().pipe(filter(function (e) { return e.from === from && e.name === name; }), map(function (e) { return e.data; }));
    };
    /**
     * @return {?}
     */
    BusClass.prototype.stop = /**
     * @return {?}
     */
    function () {
        this._e.complete();
    };
    return BusClass;
}());
/** @type {?} */
var Bus = new BusClass();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var GlobalPosition = /** @class */ (function (_super) {
    __extends(GlobalPosition, _super);
    function GlobalPosition(config) {
        var _this = _super.call(this) || this;
        _this.config = { placement: InsidePlacement.CENTER, width: 100, height: 100, offset: 0 };
        _this.updateConfig(config);
        return _this;
    }
    /**
     * @param {?=} hostEl
     * @return {?}
     */
    GlobalPosition.prototype.getPositions = /**
     * @param {?=} hostEl
     * @return {?}
     */
    function (hostEl) {
        /** @type {?} */
        var host = (/** @type {?} */ (hostEl.getBoundingClientRect()));
        /** @type {?} */
        var src = {
            width: window['innerWidth'],
            height: window['innerHeight']
        };
        var _a = this.config, w = _a.width, h = _a.height;
        w = setWH(src, host, 'width', w);
        h = setWH(src, host, 'height', h);
        /** @type {?} */
        var props = this.calc(this.config.placement, src, host);
        return __assign({}, props, { width: w, height: h, position: 'fixed', extra: this.config.placement });
    };
    /**
     * @private
     * @param {?} placement
     * @param {?} src
     * @param {?} host
     * @return {?}
     */
    GlobalPosition.prototype.calc = /**
     * @private
     * @param {?} placement
     * @param {?} src
     * @param {?} host
     * @return {?}
     */
    function (placement, src, host) {
        var _a = __read(placement.split(''), 2), main = _a[0], sub = _a[1];
        /** @type {?} */
        var p = {};
        if (main === 't') {
            p.top = this.config.offset;
        }
        if (main === 'b') {
            p.bottom = this.config.offset;
        }
        if ((main === 'l' || main === 'r' || main === 'c') && !sub) {
            p.top = (src.height - host.height) / 2;
        }
        if ((main === 't' || main === 'b' || main === 'c') && !sub) {
            p.left = (src.width - host.width) / 2;
        }
        if ((main === 'l' && !sub) || sub === 'l') {
            p.left = this.config.offset;
        }
        if ((main === 'r' && !sub) || sub === 'r') {
            p.right = this.config.offset;
        }
        return p;
    };
    return GlobalPosition;
}(ToppyPosition));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var RelativePosition = /** @class */ (function (_super) {
    __extends(RelativePosition, _super);
    function RelativePosition(config) {
        var _this = _super.call(this) || this;
        _this.config = {
            src: null,
            placement: OutsidePlacement.TOP,
            autoUpdate: false,
            width: 'auto',
            height: 'auto'
        };
        _this.updateConfig(config);
        return _this;
    }
    /**
     * @param {?} tid
     * @return {?}
     */
    RelativePosition.prototype.init = /**
     * @param {?} tid
     * @return {?}
     */
    function (tid) {
        if (this.config.autoUpdate)
            this.listenDrag(tid);
    };
    /**
     * @param {?} targetEl
     * @return {?}
     */
    RelativePosition.prototype.getPositions = /**
     * @param {?} targetEl
     * @return {?}
     */
    function (targetEl) {
        /** @type {?} */
        var s = this.getCoords(this.config.src);
        /** @type {?} */
        var h = this.getCoords(targetEl);
        var _a = this.config, w = _a.width, ht = _a.height;
        w = setWH(s, h, 'width', w);
        ht = setWH(s, h, 'height', ht);
        var _b = this.calculatePos(this.config.placement, s, h), pos = _b.pos, props = _b.props;
        return __assign({}, this.round(props), { width: w, height: ht, extra: pos });
    };
    /**
     * @private
     * @param {?} elem
     * @return {?}
     */
    RelativePosition.prototype.getCoords = /**
     * @private
     * @param {?} elem
     * @return {?}
     */
    function (elem) {
        return elem.getBoundingClientRect();
    };
    /**
     * @private
     * @param {?} placement
     * @param {?} src
     * @param {?} host
     * @return {?}
     */
    RelativePosition.prototype.calc = /**
     * @private
     * @param {?} placement
     * @param {?} src
     * @param {?} host
     * @return {?}
     */
    function (placement, src, host) {
        var _a = __read(placement.split(''), 2), main = _a[0], sub = _a[1];
        /** @type {?} */
        var p = { left: 0, top: 0 };
        if ((main === 't' || main === 'b') && !sub) {
            p.left = src.left + (src.width - host.width) / 2;
        }
        if ((main === 't' || main === 'b') && sub) {
            p.left = src.left;
        }
        if ((main === 't' || main === 'b') && sub === 'r') {
            p.left = src.left + src.width - host.width;
        }
        if (main === 'l') {
            p.left = src.left - host.width;
        }
        if (main === 'r') {
            p.left = src.right;
        }
        if (main === 't') {
            p.top = src.top - host.height;
        }
        if (main === 'b') {
            p.top = src.top + src.height;
        }
        if (main === 'l' || main === 'r') {
            p.top = src.top + (src.height - host.height) / 2;
        }
        if (sub === 't' && (main === 'l' || main === 'r')) {
            p.top = src.top;
        }
        if (sub === 'b' && (main === 'l' || main === 'r')) {
            p.top = src.top + src.height - host.height;
        }
        return p;
    };
    /**
     * @private
     * @param {?} pos
     * @param {?} s
     * @param {?} h
     * @param {?=} c
     * @return {?}
     */
    RelativePosition.prototype.calculatePos = /**
     * @private
     * @param {?} pos
     * @param {?} s
     * @param {?} h
     * @param {?=} c
     * @return {?}
     */
    function (pos, s, h, c) {
        if (c === void 0) { c = true; }
        /** @type {?} */
        var props = this.calc(pos, s, h);
        if (c && this.config.autoUpdate && this.isOverflowed(__assign({}, props, { width: h.width, height: h.height }))) {
            return this.calculatePos(this.nextPosition(pos), s, h, false);
        }
        return { pos: pos, props: props };
    };
    /**
     * @private
     * @param {?} props
     * @return {?}
     */
    RelativePosition.prototype.isOverflowed = /**
     * @private
     * @param {?} props
     * @return {?}
     */
    function (props) {
        var innerHeight = window.innerHeight, innerWidth = window.innerWidth;
        props.bottom = props.top + props.height;
        props.right = props.left + props.width;
        return props.bottom > innerHeight || props.top <= 0 || props.left <= 0 || props.right > innerWidth;
    };
    /**
     * @private
     * @param {?} current
     * @return {?}
     */
    RelativePosition.prototype.nextPosition = /**
     * @private
     * @param {?} current
     * @return {?}
     */
    function (current) {
        /** @type {?} */
        var placements = ['t', 'b', 'l', 'r', 'tl', 'bl', 'tr', 'br', 'lt', 'rt', 'lb', 'rb'];
        /** @type {?} */
        var index = placements.indexOf(current);
        /** @type {?} */
        var even = index % 2 === 0;
        return even ? placements[index + 1] : placements[index - 1];
    };
    /**
     * @private
     * @param {?} props
     * @return {?}
     */
    RelativePosition.prototype.round = /**
     * @private
     * @param {?} props
     * @return {?}
     */
    function (props) {
        Object.keys(props).forEach(function (x) { return (props[x] = Math.round(props[x])); });
        return props;
    };
    /**
     * @private
     * @param {?} tid
     * @return {?}
     */
    RelativePosition.prototype.listenDrag = /**
     * @private
     * @param {?} tid
     * @return {?}
     */
    function (tid) {
        if (this.obs)
            this.obs.disconnect();
        this.obs = new MutationObserver(function (mutationsList) {
            var e_1, _a;
            try {
                for (var mutationsList_1 = __values(mutationsList), mutationsList_1_1 = mutationsList_1.next(); !mutationsList_1_1.done; mutationsList_1_1 = mutationsList_1.next()) {
                    var mutation = mutationsList_1_1.value;
                    if (mutation.type === 'attributes')
                        Bus.send(tid, 't_dynpos');
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (mutationsList_1_1 && !mutationsList_1_1.done && (_a = mutationsList_1.return)) _a.call(mutationsList_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
        });
        this.obs.observe(this.config.src, {
            attributeFilter: ['style']
        });
    };
    return RelativePosition;
}(ToppyPosition));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var SlidePosition = /** @class */ (function (_super) {
    __extends(SlidePosition, _super);
    function SlidePosition(config) {
        var _this = _super.call(this) || this;
        _this.config = { placement: SlidePlacement.LEFT, width: '30%' };
        _this.config = __assign({}, _this.config, config);
        return _this;
    }
    /**
     * @return {?}
     */
    SlidePosition.prototype.getPositions = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var props = this.config.placement === SlidePlacement.LEFT ? { left: 0 } : { right: 0 };
        return __assign({}, props, { top: 0, width: this.config.width, height: '100%', position: 'fixed', extra: this.config.placement });
    };
    return SlidePosition;
}(ToppyPosition));

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/** @type {?} */
var DefaultConfig = {
    containerClass: 't-overlay',
    bodyClass: 't-open',
    wrapperClass: '',
    backdropClass: '',
    backdrop: false,
    closeOnDocClick: false,
    listenWindowEvents: true,
    closeOnEsc: false,
    windowResizeCallback: function () { },
    docClickCallback: function () { }
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ToppyComponent = /** @class */ (function () {
    function ToppyComponent(inj, cd, compResolver, elRef) {
        this.inj = inj;
        this.cd = cd;
        this.compResolver = compResolver;
        this.elRef = elRef;
        this.content = {
            type: "s" /* STRING */,
            data: '',
            props: {}
        };
        this.die = new Subject();
        this.pinj = Injector;
    }
    /**
     * @return {?}
     */
    ToppyComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.el = this.elRef.nativeElement;
        this.wrapperEl = this.el.querySelector('.t-wrapper');
        /** @type {?} */
        var cls = ['t-container', this.config.containerClass, this.position.getClassName()];
        if (this.config.closeOnDocClick) {
            cls = cls.concat(['no-pointers']);
        }
        this.el.setAttribute('data-tid', this.tid);
        cssClass('add', cls, "[data-tid='" + [this.tid] + "']");
        cssClass('add', [this.config.bodyClass]);
    };
    /**
     * @return {?}
     */
    ToppyComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.listenPos().subscribe();
        if (this.content.type === "c" /* COMPONENT */) {
            this.compInstance = this.setComponent(this.content.props);
            Bus.send(this.tid, 't_compins', this.compInstance);
        }
    };
    /**
     * @param {?} props
     * @return {?}
     */
    ToppyComponent.prototype.setComponent = /**
     * @param {?} props
     * @return {?}
     */
    function (props) {
        /** @type {?} */
        var compRef = this.compOutlet.createComponent(this.compResolver.resolveComponentFactory((/** @type {?} */ (this.content.data))));
        Object.assign(compRef.instance, props);
        compRef.changeDetectorRef.detectChanges();
        return compRef.instance;
    };
    /**
     * @param {?} data
     * @return {?}
     */
    ToppyComponent.prototype.updateTextContent = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (this.content.type === "s" /* STRING */) {
            this.content.data = data;
            this.cd.detectChanges();
        }
    };
    /**
     * @return {?}
     */
    ToppyComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        cssClass('remove', [this.config.bodyClass]);
        this.die.next(1);
        Bus.send(this.tid, 't_detach');
    };
    /**
     * @private
     * @return {?}
     */
    ToppyComponent.prototype.listenPos = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        return Bus.listen(this.tid, 't_dynpos').pipe(startWith(1), takeUntil(this.die), tap(function (e) {
            if (!e || !e.x)
                return _this.setPos();
            /** @type {?} */
            var coords = { left: e.x, top: e.y };
            _this.wrapperEl.style = toCss(coords);
        }));
    };
    /**
     * @private
     * @return {?}
     */
    ToppyComponent.prototype.setPos = /**
     * @private
     * @return {?}
     */
    function () {
        var _a = this.position.getPositions(this.wrapperEl), extra = _a.extra, coords = __rest(_a, ["extra"]);
        if (this.extra !== extra) {
            this.extra = extra;
            this.cd.detectChanges();
        }
        Object.assign(coords, { visibility: 'visible', opacity: '1' });
        this.wrapperEl.style = toCss(coords);
        Bus.send(this.tid, 't_posupdate');
    };
    ToppyComponent.decorators = [
        { type: Component, args: [{
                    // tslint:disable-next-line:component-selector
                    selector: 'toppy',
                    template: "<div class=\"t-backdrop\" *ngIf=\"config.backdrop\" [ngClass]=\"config.backdropClass\"></div>\n<div class=\"t-wrapper\" [ngClass]=\"config.wrapperClass\" [class]=\"extra\" #wrapperEl>\n  <ng-container [ngSwitch]=\"content.type\">\n    <ng-container *ngSwitchCase=\"'s'\">\n      <div [class]=\"content.props.class\">{{ content.data }}</div>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"'h'\"> <div [innerHTML]=\"content.data\"></div> </ng-container>\n    <ng-container *ngSwitchCase=\"'t'\">\n      <ng-container *ngTemplateOutlet=\"content.data; context: { $implicit: content.props }\"></ng-container>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"'c'\"> <ng-template #compOutlet></ng-template> </ng-container>\n  </ng-container>\n</div>\n",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: [":host{left:0;position:fixed;top:0;width:100%;height:100%;pointer-events:none}:host.no-pointers{pointer-events:all}:host .t-backdrop{left:0;position:fixed;top:0;width:100%;height:100%;background:rgba(0,0,0,.5)}:host>div.t-wrapper{position:absolute;visibility:hidden;opacity:0;transition:opacity .2s;overflow:hidden;pointer-events:all}"]
                }] }
    ];
    /** @nocollapse */
    ToppyComponent.ctorParameters = function () { return [
        { type: Injector },
        { type: ChangeDetectorRef },
        { type: ComponentFactoryResolver },
        { type: ElementRef }
    ]; };
    ToppyComponent.propDecorators = {
        compOutlet: [{ type: ViewChild, args: ['compOutlet', { read: ViewContainerRef },] }]
    };
    return ToppyComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ToppyControl = /** @class */ (function () {
    function ToppyControl(appRef, compResolver, injector) {
        var _this = this;
        this.appRef = appRef;
        this.compResolver = compResolver;
        this.injector = injector;
        this.updateTextContent = new Subject();
        this.isOpen = false;
        this.die = new Subject();
        this.updateTextContent.subscribe(function (content) {
            if (_this.isOpen)
                _this.comp.updateTextContent(content);
        });
    }
    /**
     * @return {?}
     */
    ToppyControl.prototype.open = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.isOpen)
            return;
        this.attach();
        if (this.viewEl) {
            merge(this.onDocumentClick(), this.onWindowResize(), this.onEscClick()).subscribe();
            setTimeout(function () { return Bus.send(_this.tid, 't_dynpos'); }, 1);
        }
        Bus.send(this.tid, 't_open');
        this.isOpen = true;
    };
    /**
     * @return {?}
     */
    ToppyControl.prototype.close = /**
     * @return {?}
     */
    function () {
        if (!this.isOpen)
            return;
        this.dettach();
        this.die.next(1);
        Bus.send(this.tid, 't_close');
        this.isOpen = false;
    };
    /**
     * @return {?}
     */
    ToppyControl.prototype.toggle = /**
     * @return {?}
     */
    function () {
        return this.isOpen ? this.close() : this.open();
    };
    /**
     * @return {?}
     */
    ToppyControl.prototype.onEscClick = /**
     * @return {?}
     */
    function () {
        var _this = this;
        return fromEvent(BodyEl, 'keydown').pipe(takeUntil(this.die), skipWhile(function () { return !_this.config.closeOnEsc; }), filter(function (e) { return (e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27) && e.target.nodeName === 'BODY'; }), tap(function (e) { return e.preventDefault(); }), map(function (e) { return e.target; }), tap(function () { return _this.close(); }));
    };
    /**
     * @return {?}
     */
    ToppyControl.prototype.onDocumentClick = /**
     * @return {?}
     */
    function () {
        var _this = this;
        return fromEvent(this.viewEl, 'click').pipe(takeUntil(this.die), map(function (e) { return e.target; }), skipWhile(function () { return !_this.config.closeOnDocClick; }), filter(this.isNotHostElement.bind(this)), tap(function () {
            _this.config.docClickCallback();
            _this.close();
        }));
    };
    /**
     * @return {?}
     */
    ToppyControl.prototype.onWindowResize = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var onResize = fromEvent(window, 'resize');
        /** @type {?} */
        var onScroll = fromEvent(window, 'scroll', { passive: true });
        return merge(onResize, onScroll).pipe(skipWhile(function () { return !_this.config.listenWindowEvents; }), takeUntil(this.die), debounceTime(5), observeOn(animationFrameScheduler), distinctUntilChanged(), tap(function () {
            Bus.send(_this.tid, 't_dynpos');
            _this.config.windowResizeCallback();
        }));
    };
    /**
     * @param {?} newPosition
     * @return {?}
     */
    ToppyControl.prototype.changePosition = /**
     * @param {?} newPosition
     * @return {?}
     */
    function (newPosition) {
        this.position = newPosition;
    };
    /**
     * @param {?} positionConfig
     * @return {?}
     */
    ToppyControl.prototype.updatePosition = /**
     * @param {?} positionConfig
     * @return {?}
     */
    function (positionConfig) {
        this.position.updateConfig(positionConfig);
    };
    /**
     * @param {?} content
     * @param {?=} props
     * @return {?}
     */
    ToppyControl.prototype.updateContent = /**
     * @param {?} content
     * @param {?=} props
     * @return {?}
     */
    function (content, props) {
        if (props === void 0) { props = {}; }
        this.content = getContent(content, __assign({}, this.content.props, props));
    };
    /**
     * @param {?} eventName
     * @return {?}
     */
    ToppyControl.prototype.listen = /**
     * @param {?} eventName
     * @return {?}
     */
    function (eventName) {
        return Bus.listen(this.tid, eventName);
    };
    /**
     * @private
     * @param {?} el
     * @return {?}
     */
    ToppyControl.prototype.isNotHostElement = /**
     * @private
     * @param {?} el
     * @return {?}
     */
    function (el) {
        /** @type {?} */
        var wrapperEl = this.viewEl.querySelector('.t-wrapper');
        return el !== wrapperEl && !wrapperEl.contains(el);
    };
    /**
     * @private
     * @return {?}
     */
    ToppyControl.prototype.attach = /**
     * @private
     * @return {?}
     */
    function () {
        /* create component */
        this.compFac = this.compResolver.resolveComponentFactory(ToppyComponent);
        this.compRef = this.compFac.create(this.injector);
        this.comp = this.compRef.instance;
        /* assign props */
        var _a = this, position = _a.position, content = _a.content, config = _a.config, tid = _a.tid;
        content.props.close = this.close.bind(this);
        Object.assign(this.comp, { position: position, content: content, config: config, tid: tid });
        /* attach view */
        this.hostView = this.compRef.hostView;
        this.appRef.attachView(this.hostView);
        this.viewEl = ((/** @type {?} */ (this.hostView))).rootNodes[0];
        BodyEl.appendChild(this.viewEl);
    };
    /**
     * @private
     * @return {?}
     */
    ToppyControl.prototype.dettach = /**
     * @private
     * @return {?}
     */
    function () {
        if (!this.hostView)
            return;
        this.appRef.detachView(this.hostView);
        this.compRef.destroy();
        this.hostView = this.viewEl = this.comp = null;
    };
    return ToppyControl;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var Toppy = /** @class */ (function () {
    function Toppy(injector) {
        this.injector = injector;
        this.inputs = {
            position: null,
            config: DefaultConfig,
            content: { type: "s" /* STRING */, data: 'hello', props: {} },
            tid: null
        };
        this.inputs.position = new GlobalPosition({ placement: InsidePlacement.TOP });
    }
    /**
     * @param {?} position
     * @return {?}
     */
    Toppy.prototype.position = /**
     * @param {?} position
     * @return {?}
     */
    function (position) {
        this.inputs.position = position;
        return this;
    };
    /**
     * @param {?} config
     * @return {?}
     */
    Toppy.prototype.config = /**
     * @param {?} config
     * @return {?}
     */
    function (config) {
        this.inputs.config = __assign({}, DefaultConfig, config);
        return this;
    };
    /**
     * @param {?} data
     * @param {?=} props
     * @return {?}
     */
    Toppy.prototype.content = /**
     * @param {?} data
     * @param {?=} props
     * @return {?}
     */
    function (data, props) {
        if (props === void 0) { props = {}; }
        this.inputs.content = getContent(data, props);
        return this;
    };
    /**
     * @param {?=} key
     * @return {?}
     */
    Toppy.prototype.create = /**
     * @param {?=} key
     * @return {?}
     */
    function (key) {
        if (key === void 0) { key = null; }
        this.tid = this.inputs.tid = key || createId();
        /** @type {?} */
        var injector = Injector.create([
            {
                provide: ToppyControl,
                deps: [ApplicationRef, ComponentFactoryResolver, Injector]
            }
        ], this.injector);
        /** @type {?} */
        var tc = injector.get(ToppyControl);
        if (Toppy.controls[this.tid]) {
            this.tid = createId();
        }
        this.inputs.position.init(this.tid);
        Toppy.controls[this.tid] = Object.assign(tc, this.inputs);
        return tc;
    };
    /**
     * @param {?} tid
     * @return {?}
     */
    Toppy.prototype.getCtrl = /**
     * @param {?} tid
     * @return {?}
     */
    function (tid) {
        return Toppy.controls[tid];
    };
    /**
     * @return {?}
     */
    Toppy.prototype.destroy = /**
     * @return {?}
     */
    function () {
        // tslint:disable-next-line:forin
        for (var key in Toppy.controls) {
            Toppy.controls[key].close();
        }
        Toppy.controls = {};
        Bus.stop();
    };
    Toppy.controls = {};
    Toppy.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    Toppy.ctorParameters = function () { return [
        { type: Injector }
    ]; };
    /** @nocollapse */ Toppy.ngInjectableDef = defineInjectable({ factory: function Toppy_Factory() { return new Toppy(inject(INJECTOR)); }, token: Toppy, providedIn: "root" });
    return Toppy;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var ToppyModule = /** @class */ (function () {
    function ToppyModule() {
    }
    ToppyModule.decorators = [
        { type: NgModule, args: [{
                    imports: [CommonModule],
                    declarations: [ToppyComponent],
                    entryComponents: [ToppyComponent]
                },] }
    ];
    return ToppyModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */

export { InsidePlacement, OutsidePlacement, SlidePlacement, FullscreenPosition, GlobalPosition, RelativePosition, SlidePosition, Toppy, ToppyControl, ToppyModule, ToppyComponent as ɵa };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9wcHkuanMubWFwIiwic291cmNlcyI6WyJuZzovL3RvcHB5L2xpYi9tb2RlbHMudHMiLCJuZzovL3RvcHB5L2xpYi9wb3NpdGlvbi9wb3NpdGlvbi50cyIsIm5nOi8vdG9wcHkvbGliL3Bvc2l0aW9uL2Z1bGxzY3JlZW4tcG9zaXRpb24udHMiLCJuZzovL3RvcHB5L2xpYi91dGlscy50cyIsIm5nOi8vdG9wcHkvbGliL3Bvc2l0aW9uL2dsb2JhbC1wb3NpdGlvbi50cyIsIm5nOi8vdG9wcHkvbGliL3Bvc2l0aW9uL3JlbGF0aXZlLXBvc2l0aW9uLnRzIiwibmc6Ly90b3BweS9saWIvcG9zaXRpb24vc2xpZGUtcG9zaXRpb24udHMiLCJuZzovL3RvcHB5L2xpYi9jb25maWcudHMiLCJuZzovL3RvcHB5L2xpYi90b3BweS5jb21wb25lbnQudHMiLCJuZzovL3RvcHB5L2xpYi90b3BweS1jb250cm9sLnRzIiwibmc6Ly90b3BweS9saWIvdG9wcHkudHMiLCJuZzovL3RvcHB5L2xpYi90b3BweS5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGVtcGxhdGVSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFRvcHB5UG9zaXRpb24gfSBmcm9tICcuL3Bvc2l0aW9uL3Bvc2l0aW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBQb3NpdGlvbk1ldGEge1xuICB0b3A/OiBudW1iZXI7XG4gIGxlZnQ/OiBudW1iZXI7XG4gIGJvdHRvbT86IG51bWJlcjtcbiAgcmlnaHQ/OiBudW1iZXI7XG4gIGhlaWdodD86IG51bWJlciB8IHN0cmluZztcbiAgd2lkdGg/OiBudW1iZXIgfCBzdHJpbmc7XG4gIHBvc2l0aW9uPzogc3RyaW5nO1xuICBleHRyYT86IHN0cmluZztcbn1cblxuZW51bSBwIHtcbiAgVE9QID0gJ3QnLFxuICBMRUZUID0gJ2wnLFxuICBSSUdIVCA9ICdyJyxcbiAgQk9UVE9NID0gJ2InLFxuICBUT1BfTEVGVCA9ICd0bCcsXG4gIFRPUF9SSUdIVCA9ICd0cicsXG4gIEJPVFRPTV9MRUZUID0gJ2JsJyxcbiAgQk9UVE9NX1JJR0hUID0gJ2JyJ1xufVxuXG5lbnVtIG8ge1xuICBMRUZUX1RPUCA9ICdsdCcsXG4gIFJJR0hUX1RPUCA9ICdydCcsXG4gIExFRlRfQk9UVE9NID0gJ2xiJyxcbiAgUklHSFRfQk9UVE9NID0gJ3JiJ1xufVxuXG5lbnVtIGkge1xuICBDRU5URVIgPSAnYydcbn1cbmV4cG9ydCBjb25zdCBPdXRzaWRlUGxhY2VtZW50ID0ge1xuICAuLi5wLFxuICAuLi5vXG59O1xuZXhwb3J0IGNvbnN0IEluc2lkZVBsYWNlbWVudCA9IHtcbiAgLi4ucCxcbiAgLi4uaVxufTtcbmV4cG9ydCB0eXBlIE91dHNpZGVQbGFjZW1lbnQgPSBwIHwgbztcbmV4cG9ydCB0eXBlIEluc2lkZVBsYWNlbWVudCA9IHAgfCBpO1xuXG5leHBvcnQgZW51bSBTbGlkZVBsYWNlbWVudCB7XG4gIExFRlQgPSAnbCcsXG4gIFJJR0hUID0gJ3InXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29udGFpbmVyU2l6ZSB7XG4gIHdpZHRoOiBzdHJpbmcgfCBudW1iZXI7XG4gIGhlaWdodDogc3RyaW5nIHwgbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRvcHB5Q29uZmlnIHtcbiAgYmFja2Ryb3A6IGJvb2xlYW47XG4gIGNvbnRhaW5lckNsYXNzOiBzdHJpbmc7XG4gIHdyYXBwZXJDbGFzczogc3RyaW5nO1xuICBiYWNrZHJvcENsYXNzOiBzdHJpbmc7XG4gIGxpc3RlbldpbmRvd0V2ZW50czogYm9vbGVhbjtcbiAgY2xvc2VPbkRvY0NsaWNrOiBib29sZWFuO1xuICBib2R5Q2xhc3M6IHN0cmluZztcbiAgY2xvc2VPbkVzYzogYm9vbGVhbjtcbiAgd2luZG93UmVzaXplQ2FsbGJhY2s6ICgpID0+IHZvaWQ7XG4gIGRvY0NsaWNrQ2FsbGJhY2s6ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9uZW50VHlwZTxUPiB7XG4gIG5ldyAoLi4uYXJnczogYW55W10pOiBUO1xufVxuXG5leHBvcnQgdHlwZSBUSUQgPSBzdHJpbmc7XG5cbmV4cG9ydCB0eXBlIFRvcHB5RXZlbnROYW1lID0gJ3Rfb3BlbicgfCAndF9jbG9zZScgfCAndF9keW5wb3MnIHwgJ3RfZGV0YWNoJyB8ICd0X3Bvc3VwZGF0ZScgfCAndF9jb21waW5zJztcblxuZXhwb3J0IGludGVyZmFjZSBUb3BweUV2ZW50IHtcbiAgZnJvbTogVElEO1xuICBuYW1lOiBUb3BweUV2ZW50TmFtZTtcbiAgZGF0YT86IGFueTtcbn1cblxuZXhwb3J0IGNvbnN0IGVudW0gQ29udGVudFR5cGUge1xuICBTVFJJTkcgPSAncycsXG4gIEhUTUwgPSAnaCcsXG4gIFRFTVBMQVRFID0gJ3QnLFxuICBDT01QT05FTlQgPSAnYydcbn1cbmV4cG9ydCB0eXBlIENvbnRlbnREYXRhID0gc3RyaW5nIHwgVGVtcGxhdGVSZWY8YW55PiB8IENvbXBvbmVudFR5cGU8YW55PjtcbmV4cG9ydCB0eXBlIENvbnRlbnRQcm9wcyA9IHsgW3g6IHN0cmluZ106IGFueSB9IHwgYW55O1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRlbnQge1xuICB0eXBlPzogQ29udGVudFR5cGU7XG4gIGRhdGE6IENvbnRlbnREYXRhO1xuICBwcm9wcz86IENvbnRlbnRQcm9wcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnB1dHMge1xuICBwb3NpdGlvbjogVG9wcHlQb3NpdGlvbiB8IG51bGw7XG4gIGNvbmZpZzogVG9wcHlDb25maWc7XG4gIGNvbnRlbnQ6IENvbnRlbnQ7XG4gIHRpZDogVElEO1xufVxuIiwiZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRvcHB5UG9zaXRpb24ge1xuICBwcm90ZWN0ZWQgY29uZmlnID0ge307XG4gIGFic3RyYWN0IGdldFBvc2l0aW9ucyhob3N0OiBIVE1MRWxlbWVudCk6IGFueTtcblxuICBnZXRDbGFzc05hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lLnJlcGxhY2UoJ1BvcycsICctcG9zJykudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIHVwZGF0ZUNvbmZpZyhjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IHsgLi4udGhpcy5jb25maWcsIC4uLmNvbmZpZyB9O1xuICB9XG5cbiAgaW5pdCh0aWQ6IHN0cmluZykge31cbn1cbiIsImltcG9ydCB7IFBvc2l0aW9uTWV0YSB9IGZyb20gJy4uL21vZGVscyc7XG5pbXBvcnQgeyBUb3BweVBvc2l0aW9uIH0gZnJvbSAnLi9wb3NpdGlvbic7XG5cbmV4cG9ydCBjbGFzcyBGdWxsc2NyZWVuUG9zaXRpb24gZXh0ZW5kcyBUb3BweVBvc2l0aW9uIHtcbiAgZ2V0UG9zaXRpb25zKCk6IFBvc2l0aW9uTWV0YSB7XG4gICAgcmV0dXJuIHsgdG9wOiAwLCBsZWZ0OiAwLCB3aWR0aDogJzEwMCUnLCBoZWlnaHQ6ICcxMDAlJywgcG9zaXRpb246ICdmaXhlZCcgfTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgVGVtcGxhdGVSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGZpbHRlciwgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgQ29udGVudCwgQ29udGVudERhdGEsIENvbnRlbnRQcm9wcywgQ29udGVudFR5cGUsIFRvcHB5RXZlbnQsIFRvcHB5RXZlbnROYW1lIH0gZnJvbSAnLi9tb2RlbHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGVudChkYXRhOiBDb250ZW50RGF0YSwgcHJvcHM6IENvbnRlbnRQcm9wcyA9IHt9KTogQ29udGVudCB7XG4gIGxldCB0eXBlOiBDb250ZW50VHlwZSA9IENvbnRlbnRUeXBlLkNPTVBPTkVOVDtcblxuICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnICYmIHByb3BzWydoYXNIVE1MJ10pIHR5cGUgPSBDb250ZW50VHlwZS5IVE1MO1xuICBlbHNlIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHR5cGUgPSBDb250ZW50VHlwZS5TVFJJTkc7XG4gIGVsc2UgaWYgKGRhdGEgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZikgdHlwZSA9IENvbnRlbnRUeXBlLlRFTVBMQVRFO1xuXG4gIHJldHVybiB7IGRhdGEsIHR5cGUsIHByb3BzIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJZCgpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKClcbiAgICAudG9TdHJpbmcoMzYpXG4gICAgLnN1YnN0cigyLCA1KTtcbn1cblxuLyogaHRtbCBkb20gdXRpbHMgKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNzc0NsYXNzKG1ldGhvZDogJ2FkZCcgfCAncmVtb3ZlJywgY2xzOiBzdHJpbmdbXSwgdGFyZ2V0OiBzdHJpbmcgPSAnYm9keScpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpLmNsYXNzTGlzdFttZXRob2RdKC4uLmNscyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b0NzcyhzdHlsZU9iaikge1xuICByZXR1cm4gT2JqZWN0LmtleXMoc3R5bGVPYmopXG4gICAgLm1hcCh4ID0+IGAke3h9OiR7c3R5bGVPYmpbeF19JHt0eXBlb2Ygc3R5bGVPYmpbeF0gPT09ICdudW1iZXInID8gJ3B4JyA6ICcnfWApXG4gICAgLmpvaW4oJzsnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBlcmNlbnRUb0NzcyhtYXgsIHBlcmNlbnRhZ2U6IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBudW1iZXIgPSBOdW1iZXIocGVyY2VudGFnZS5zbGljZSgwLCAtMSkpO1xuICBpZiAobnVtYmVyID4gMTAwKSB7XG4gICAgbnVtYmVyID0gMTAwO1xuICB9XG4gIHJldHVybiBgY2FsYygke21heH1weCAtICR7MTAwIC0gbnVtYmVyfSUpYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFdIKHNyYywgaG9zdCwga2V5LCB2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIGhvc3Rba2V5XSA9IHZhbHVlID0gTWF0aC5hYnModmFsdWUpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuZW5kc1dpdGgoJyUnKSkge1xuICAgIHZhbHVlID0gcGVyY2VudFRvQ3NzKHNyY1trZXldLCB2YWx1ZSk7XG4gIH1cblxuICByZXR1cm4gdmFsdWU7XG59XG5cbmV4cG9ydCBjb25zdCBCb2R5RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5cbi8qIGV2ZW50cyAqL1xuXG5jbGFzcyBCdXNDbGFzcyB7XG4gIHByaXZhdGUgX2U6IFN1YmplY3Q8VG9wcHlFdmVudD4gPSBuZXcgU3ViamVjdCgpO1xuICBzZW5kKGZyb206IHN0cmluZywgbmFtZTogVG9wcHlFdmVudE5hbWUsIGRhdGE6IGFueSA9IG51bGwpOiB2b2lkIHtcbiAgICB0aGlzLl9lLm5leHQoeyBmcm9tLCBuYW1lLCBkYXRhIH0pO1xuICB9XG4gIGxpc3Rlbihmcm9tOiBzdHJpbmcsIG5hbWU6IFRvcHB5RXZlbnROYW1lKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5fZS5hc09ic2VydmFibGUoKS5waXBlKFxuICAgICAgZmlsdGVyKGUgPT4gZS5mcm9tID09PSBmcm9tICYmIGUubmFtZSA9PT0gbmFtZSksXG4gICAgICBtYXAoZSA9PiBlLmRhdGEpXG4gICAgKTtcbiAgfVxuXG4gIHN0b3AoKTogdm9pZCB7XG4gICAgdGhpcy5fZS5jb21wbGV0ZSgpO1xuICB9XG59XG5leHBvcnQgY29uc3QgQnVzID0gbmV3IEJ1c0NsYXNzKCk7XG4iLCJpbXBvcnQgeyBJbnNpZGVQbGFjZW1lbnQgfSBmcm9tICcuLi9tb2RlbHMnO1xuaW1wb3J0IHsgc2V0V0ggfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyBUb3BweVBvc2l0aW9uIH0gZnJvbSAnLi9wb3NpdGlvbic7XG5cbmludGVyZmFjZSBHbG9iYWxQb3NpdGlvbkNvbmZpZyB7XG4gIHBsYWNlbWVudD86IEluc2lkZVBsYWNlbWVudDtcbiAgb2Zmc2V0PzogbnVtYmVyO1xuICB3aWR0aD86IHN0cmluZyB8IG51bWJlcjtcbiAgaGVpZ2h0Pzogc3RyaW5nIHwgbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgR2xvYmFsUG9zaXRpb24gZXh0ZW5kcyBUb3BweVBvc2l0aW9uIHtcbiAgcHJvdGVjdGVkIGNvbmZpZzogR2xvYmFsUG9zaXRpb25Db25maWcgPSB7IHBsYWNlbWVudDogSW5zaWRlUGxhY2VtZW50LkNFTlRFUiwgd2lkdGg6IDEwMCwgaGVpZ2h0OiAxMDAsIG9mZnNldDogMCB9O1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogR2xvYmFsUG9zaXRpb25Db25maWcpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudXBkYXRlQ29uZmlnKGNvbmZpZyk7XG4gIH1cbiAgZ2V0UG9zaXRpb25zKGhvc3RFbD86IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgaG9zdCA9IGhvc3RFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSBhcyBhbnk7XG4gICAgY29uc3Qgc3JjID0ge1xuICAgICAgd2lkdGg6IHdpbmRvd1snaW5uZXJXaWR0aCddLFxuICAgICAgaGVpZ2h0OiB3aW5kb3dbJ2lubmVySGVpZ2h0J11cbiAgICB9O1xuICAgIGxldCB7IHdpZHRoOiB3LCBoZWlnaHQ6IGggfSA9IHRoaXMuY29uZmlnO1xuXG4gICAgdyA9IHNldFdIKHNyYywgaG9zdCwgJ3dpZHRoJywgdyk7XG4gICAgaCA9IHNldFdIKHNyYywgaG9zdCwgJ2hlaWdodCcsIGgpO1xuXG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLmNhbGModGhpcy5jb25maWcucGxhY2VtZW50LCBzcmMsIGhvc3QpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5wcm9wcyxcbiAgICAgIHdpZHRoOiB3LFxuICAgICAgaGVpZ2h0OiBoLFxuICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICBleHRyYTogdGhpcy5jb25maWcucGxhY2VtZW50XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsYyhwbGFjZW1lbnQ6IEluc2lkZVBsYWNlbWVudCwgc3JjLCBob3N0KSB7XG4gICAgY29uc3QgW21haW4sIHN1Yl0gPSBwbGFjZW1lbnQuc3BsaXQoJycpO1xuICAgIGNvbnN0IHA6IGFueSA9IHt9O1xuXG4gICAgaWYgKG1haW4gPT09ICd0Jykge1xuICAgICAgcC50b3AgPSB0aGlzLmNvbmZpZy5vZmZzZXQ7XG4gICAgfVxuICAgIGlmIChtYWluID09PSAnYicpIHtcbiAgICAgIHAuYm90dG9tID0gdGhpcy5jb25maWcub2Zmc2V0O1xuICAgIH1cbiAgICBpZiAoKG1haW4gPT09ICdsJyB8fCBtYWluID09PSAncicgfHwgbWFpbiA9PT0gJ2MnKSAmJiAhc3ViKSB7XG4gICAgICBwLnRvcCA9IChzcmMuaGVpZ2h0IC0gaG9zdC5oZWlnaHQpIC8gMjtcbiAgICB9XG5cbiAgICBpZiAoKG1haW4gPT09ICd0JyB8fCBtYWluID09PSAnYicgfHwgbWFpbiA9PT0gJ2MnKSAmJiAhc3ViKSB7XG4gICAgICBwLmxlZnQgPSAoc3JjLndpZHRoIC0gaG9zdC53aWR0aCkgLyAyO1xuICAgIH1cbiAgICBpZiAoKG1haW4gPT09ICdsJyAmJiAhc3ViKSB8fCBzdWIgPT09ICdsJykge1xuICAgICAgcC5sZWZ0ID0gdGhpcy5jb25maWcub2Zmc2V0O1xuICAgIH1cbiAgICBpZiAoKG1haW4gPT09ICdyJyAmJiAhc3ViKSB8fCBzdWIgPT09ICdyJykge1xuICAgICAgcC5yaWdodCA9IHRoaXMuY29uZmlnLm9mZnNldDtcbiAgICB9XG5cbiAgICByZXR1cm4gcDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgT3V0c2lkZVBsYWNlbWVudCwgUG9zaXRpb25NZXRhIH0gZnJvbSAnLi4vbW9kZWxzJztcbmltcG9ydCB7IEJ1cywgc2V0V0ggfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyBUb3BweVBvc2l0aW9uIH0gZnJvbSAnLi9wb3NpdGlvbic7XG5cbmludGVyZmFjZSBSZWxhdGl2ZVBvc2l0aW9uQ29uZmlnIHtcbiAgc3JjOiBIVE1MRWxlbWVudDtcbiAgcGxhY2VtZW50PzogT3V0c2lkZVBsYWNlbWVudDtcbiAgYXV0b1VwZGF0ZT86IGJvb2xlYW47XG4gIHdpZHRoPzogc3RyaW5nIHwgbnVtYmVyO1xuICBoZWlnaHQ/OiBzdHJpbmcgfCBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBSZWxhdGl2ZVBvc2l0aW9uIGV4dGVuZHMgVG9wcHlQb3NpdGlvbiB7XG4gIHByb3RlY3RlZCBjb25maWc6IFJlbGF0aXZlUG9zaXRpb25Db25maWcgPSB7XG4gICAgc3JjOiBudWxsLFxuICAgIHBsYWNlbWVudDogT3V0c2lkZVBsYWNlbWVudC5UT1AsXG4gICAgYXV0b1VwZGF0ZTogZmFsc2UsXG4gICAgd2lkdGg6ICdhdXRvJyxcbiAgICBoZWlnaHQ6ICdhdXRvJ1xuICB9O1xuICBvYnM6IE11dGF0aW9uT2JzZXJ2ZXI7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogUmVsYXRpdmVQb3NpdGlvbkNvbmZpZykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy51cGRhdGVDb25maWcoY29uZmlnKTtcbiAgfVxuICBpbml0KHRpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY29uZmlnLmF1dG9VcGRhdGUpIHRoaXMubGlzdGVuRHJhZyh0aWQpO1xuICB9XG5cbiAgZ2V0UG9zaXRpb25zKHRhcmdldEVsOiBIVE1MRWxlbWVudCk6IFBpY2s8UG9zaXRpb25NZXRhLCBhbnk+IHtcbiAgICBjb25zdCBzID0gdGhpcy5nZXRDb29yZHModGhpcy5jb25maWcuc3JjKTtcbiAgICBjb25zdCBoID0gdGhpcy5nZXRDb29yZHModGFyZ2V0RWwpO1xuICAgIGxldCB7IHdpZHRoOiB3LCBoZWlnaHQ6IGh0IH0gPSB0aGlzLmNvbmZpZztcblxuICAgIHcgPSBzZXRXSChzLCBoLCAnd2lkdGgnLCB3KTtcbiAgICBodCA9IHNldFdIKHMsIGgsICdoZWlnaHQnLCBodCk7XG5cbiAgICBjb25zdCB7IHBvcywgcHJvcHMgfSA9IHRoaXMuY2FsY3VsYXRlUG9zKHRoaXMuY29uZmlnLnBsYWNlbWVudCwgcywgaCk7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5yb3VuZChwcm9wcyksIHdpZHRoOiB3LCBoZWlnaHQ6IGh0LCBleHRyYTogcG9zIH07XG4gIH1cblxuICBwcml2YXRlIGdldENvb3JkcyhlbGVtOiBIVE1MRWxlbWVudCk6IFBvc2l0aW9uTWV0YSB7XG4gICAgcmV0dXJuIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIH1cblxuICBwcml2YXRlIGNhbGMocGxhY2VtZW50OiBPdXRzaWRlUGxhY2VtZW50LCBzcmMsIGhvc3QpOiBvYmplY3Qge1xuICAgIGNvbnN0IFttYWluLCBzdWJdID0gcGxhY2VtZW50LnNwbGl0KCcnKTtcbiAgICBjb25zdCBwID0geyBsZWZ0OiAwLCB0b3A6IDAgfTtcbiAgICBpZiAoKG1haW4gPT09ICd0JyB8fCBtYWluID09PSAnYicpICYmICFzdWIpIHtcbiAgICAgIHAubGVmdCA9IHNyYy5sZWZ0ICsgKHNyYy53aWR0aCAtIGhvc3Qud2lkdGgpIC8gMjtcbiAgICB9XG5cbiAgICBpZiAoKG1haW4gPT09ICd0JyB8fCBtYWluID09PSAnYicpICYmIHN1Yikge1xuICAgICAgcC5sZWZ0ID0gc3JjLmxlZnQ7XG4gICAgfVxuICAgIGlmICgobWFpbiA9PT0gJ3QnIHx8IG1haW4gPT09ICdiJykgJiYgc3ViID09PSAncicpIHtcbiAgICAgIHAubGVmdCA9IHNyYy5sZWZ0ICsgc3JjLndpZHRoIC0gaG9zdC53aWR0aDtcbiAgICB9XG4gICAgaWYgKG1haW4gPT09ICdsJykge1xuICAgICAgcC5sZWZ0ID0gc3JjLmxlZnQgLSBob3N0LndpZHRoO1xuICAgIH1cbiAgICBpZiAobWFpbiA9PT0gJ3InKSB7XG4gICAgICBwLmxlZnQgPSBzcmMucmlnaHQ7XG4gICAgfVxuXG4gICAgaWYgKG1haW4gPT09ICd0Jykge1xuICAgICAgcC50b3AgPSBzcmMudG9wIC0gaG9zdC5oZWlnaHQ7XG4gICAgfVxuICAgIGlmIChtYWluID09PSAnYicpIHtcbiAgICAgIHAudG9wID0gc3JjLnRvcCArIHNyYy5oZWlnaHQ7XG4gICAgfVxuICAgIGlmIChtYWluID09PSAnbCcgfHwgbWFpbiA9PT0gJ3InKSB7XG4gICAgICBwLnRvcCA9IHNyYy50b3AgKyAoc3JjLmhlaWdodCAtIGhvc3QuaGVpZ2h0KSAvIDI7XG4gICAgfVxuICAgIGlmIChzdWIgPT09ICd0JyAmJiAobWFpbiA9PT0gJ2wnIHx8IG1haW4gPT09ICdyJykpIHtcbiAgICAgIHAudG9wID0gc3JjLnRvcDtcbiAgICB9XG4gICAgaWYgKHN1YiA9PT0gJ2InICYmIChtYWluID09PSAnbCcgfHwgbWFpbiA9PT0gJ3InKSkge1xuICAgICAgcC50b3AgPSBzcmMudG9wICsgc3JjLmhlaWdodCAtIGhvc3QuaGVpZ2h0O1xuICAgIH1cbiAgICByZXR1cm4gcDtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlUG9zKHBvcywgcywgaCwgYyA9IHRydWUpOiB7IFt4OiBzdHJpbmddOiBhbnkgfSB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLmNhbGMocG9zLCBzLCBoKTtcblxuICAgIGlmIChjICYmIHRoaXMuY29uZmlnLmF1dG9VcGRhdGUgJiYgdGhpcy5pc092ZXJmbG93ZWQoeyAuLi5wcm9wcywgd2lkdGg6IGgud2lkdGgsIGhlaWdodDogaC5oZWlnaHQgfSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZVBvcyh0aGlzLm5leHRQb3NpdGlvbihwb3MpLCBzLCBoLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgcG9zLCBwcm9wcyB9O1xuICB9XG5cbiAgcHJpdmF0ZSBpc092ZXJmbG93ZWQocHJvcHM6IHsgW3g6IHN0cmluZ106IGFueSB9KTogYm9vbGVhbiB7XG4gICAgY29uc3QgeyBpbm5lckhlaWdodCwgaW5uZXJXaWR0aCB9ID0gd2luZG93O1xuICAgIHByb3BzLmJvdHRvbSA9IHByb3BzLnRvcCArIHByb3BzLmhlaWdodDtcbiAgICBwcm9wcy5yaWdodCA9IHByb3BzLmxlZnQgKyBwcm9wcy53aWR0aDtcbiAgICByZXR1cm4gcHJvcHMuYm90dG9tID4gaW5uZXJIZWlnaHQgfHwgcHJvcHMudG9wIDw9IDAgfHwgcHJvcHMubGVmdCA8PSAwIHx8IHByb3BzLnJpZ2h0ID4gaW5uZXJXaWR0aDtcbiAgfVxuXG4gIHByaXZhdGUgbmV4dFBvc2l0aW9uKGN1cnJlbnQ6IE91dHNpZGVQbGFjZW1lbnQpOiBzdHJpbmcge1xuICAgIGNvbnN0IHBsYWNlbWVudHMgPSBbJ3QnLCAnYicsICdsJywgJ3InLCAndGwnLCAnYmwnLCAndHInLCAnYnInLCAnbHQnLCAncnQnLCAnbGInLCAncmInXTtcblxuICAgIGNvbnN0IGluZGV4ID0gcGxhY2VtZW50cy5pbmRleE9mKGN1cnJlbnQpO1xuICAgIGNvbnN0IGV2ZW4gPSBpbmRleCAlIDIgPT09IDA7XG4gICAgcmV0dXJuIGV2ZW4gPyBwbGFjZW1lbnRzW2luZGV4ICsgMV0gOiBwbGFjZW1lbnRzW2luZGV4IC0gMV07XG4gIH1cblxuICBwcml2YXRlIHJvdW5kKHByb3BzOiBvYmplY3QpOiBvYmplY3Qge1xuICAgIE9iamVjdC5rZXlzKHByb3BzKS5mb3JFYWNoKHggPT4gKHByb3BzW3hdID0gTWF0aC5yb3VuZChwcm9wc1t4XSkpKTtcbiAgICByZXR1cm4gcHJvcHM7XG4gIH1cblxuICBwcml2YXRlIGxpc3RlbkRyYWcodGlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5vYnMpIHRoaXMub2JzLmRpc2Nvbm5lY3QoKTtcbiAgICB0aGlzLm9icyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG11dGF0aW9uc0xpc3QgPT4ge1xuICAgICAgZm9yIChjb25zdCBtdXRhdGlvbiBvZiBtdXRhdGlvbnNMaXN0KSB7XG4gICAgICAgIGlmIChtdXRhdGlvbi50eXBlID09PSAnYXR0cmlidXRlcycpIEJ1cy5zZW5kKHRpZCwgJ3RfZHlucG9zJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLm9icy5vYnNlcnZlKHRoaXMuY29uZmlnLnNyYywge1xuICAgICAgYXR0cmlidXRlRmlsdGVyOiBbJ3N0eWxlJ11cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9zaXRpb25NZXRhLCBTbGlkZVBsYWNlbWVudCB9IGZyb20gJy4uL21vZGVscyc7XG5pbXBvcnQgeyBUb3BweVBvc2l0aW9uIH0gZnJvbSAnLi9wb3NpdGlvbic7XG5cbmludGVyZmFjZSBTbGlkZVBsYWNlbWVudENvbmZpZyB7XG4gIHBsYWNlbWVudD86IFNsaWRlUGxhY2VtZW50O1xuICB3aWR0aD86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFNsaWRlUG9zaXRpb24gZXh0ZW5kcyBUb3BweVBvc2l0aW9uIHtcbiAgcHJvdGVjdGVkIGNvbmZpZzogU2xpZGVQbGFjZW1lbnRDb25maWcgPSB7IHBsYWNlbWVudDogU2xpZGVQbGFjZW1lbnQuTEVGVCwgd2lkdGg6ICczMCUnIH07XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBTbGlkZVBsYWNlbWVudENvbmZpZykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5jb25maWcgPSB7IC4uLnRoaXMuY29uZmlnLCAuLi5jb25maWcgfTtcbiAgfVxuICBnZXRQb3NpdGlvbnMoKTogUG9zaXRpb25NZXRhIHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMuY29uZmlnLnBsYWNlbWVudCA9PT0gU2xpZGVQbGFjZW1lbnQuTEVGVCA/IHsgbGVmdDogMCB9IDogeyByaWdodDogMCB9O1xuICAgIHJldHVybiB7XG4gICAgICAuLi5wcm9wcyxcbiAgICAgIHRvcDogMCxcbiAgICAgIHdpZHRoOiB0aGlzLmNvbmZpZy53aWR0aCxcbiAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICBleHRyYTogdGhpcy5jb25maWcucGxhY2VtZW50XG4gICAgfTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgVG9wcHlDb25maWcgfSBmcm9tICcuL21vZGVscyc7XG5cbmV4cG9ydCBjb25zdCBEZWZhdWx0Q29uZmlnOiBUb3BweUNvbmZpZyA9IHtcbiAgY29udGFpbmVyQ2xhc3M6ICd0LW92ZXJsYXknLFxuICBib2R5Q2xhc3M6ICd0LW9wZW4nLFxuICB3cmFwcGVyQ2xhc3M6ICcnLFxuICBiYWNrZHJvcENsYXNzOiAnJyxcbiAgYmFja2Ryb3A6IGZhbHNlLFxuICBjbG9zZU9uRG9jQ2xpY2s6IGZhbHNlLFxuICBsaXN0ZW5XaW5kb3dFdmVudHM6IHRydWUsXG4gIGNsb3NlT25Fc2M6IGZhbHNlLFxuICB3aW5kb3dSZXNpemVDYWxsYmFjazogKCkgPT4ge30sXG4gIGRvY0NsaWNrQ2FsbGJhY2s6ICgpID0+IHt9XG59O1xuIiwiaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgRWxlbWVudFJlZixcbiAgSW5qZWN0b3IsXG4gIE9uRGVzdHJveSxcbiAgT25Jbml0LFxuICBWaWV3Q2hpbGQsXG4gIFZpZXdDb250YWluZXJSZWZcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBzdGFydFdpdGgsIHRha2VVbnRpbCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgQ29udGVudCwgQ29udGVudFR5cGUsIFRJRCwgVG9wcHlDb25maWcgfSBmcm9tICcuL21vZGVscyc7XG5pbXBvcnQgeyBUb3BweVBvc2l0aW9uIH0gZnJvbSAnLi9wb3NpdGlvbi9wb3NpdGlvbic7XG5pbXBvcnQgeyBCdXMsIGNzc0NsYXNzLCB0b0NzcyB9IGZyb20gJy4vdXRpbHMnO1xuXG5AQ29tcG9uZW50KHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmNvbXBvbmVudC1zZWxlY3RvclxuICBzZWxlY3RvcjogJ3RvcHB5JyxcbiAgdGVtcGxhdGVVcmw6ICcuL3RlbXBsYXRlLmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9zdHlsZXMuc2NzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBUb3BweUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcbiAgQFZpZXdDaGlsZCgnY29tcE91dGxldCcsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiB9KSBjb21wT3V0bGV0OiBWaWV3Q29udGFpbmVyUmVmO1xuICBjb250ZW50OiBDb250ZW50ID0ge1xuICAgIHR5cGU6IENvbnRlbnRUeXBlLlNUUklORyxcbiAgICBkYXRhOiAnJyxcbiAgICBwcm9wczoge31cbiAgfTtcbiAgY29uZmlnOiBUb3BweUNvbmZpZztcbiAgcG9zaXRpb246IFRvcHB5UG9zaXRpb247XG4gIHRpZDogVElEO1xuICBlbDogSFRNTEVsZW1lbnQgfCBhbnk7XG4gIHdyYXBwZXJFbDogSFRNTEVsZW1lbnQgfCBhbnk7XG4gIGV4dHJhOiBzdHJpbmc7XG4gIHBpbmo6IGFueTtcbiAgY29tcEluc3RhbmNlO1xuICBwcml2YXRlIGRpZTogU3ViamVjdDwxPiA9IG5ldyBTdWJqZWN0KCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGluajogSW5qZWN0b3IsXG4gICAgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJpdmF0ZSBjb21wUmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgICBwcml2YXRlIGVsUmVmOiBFbGVtZW50UmVmXG4gICkge1xuICAgIHRoaXMucGluaiA9IEluamVjdG9yO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5lbCA9IHRoaXMuZWxSZWYubmF0aXZlRWxlbWVudDtcbiAgICB0aGlzLndyYXBwZXJFbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignLnQtd3JhcHBlcicpO1xuICAgIGxldCBjbHMgPSBbJ3QtY29udGFpbmVyJywgdGhpcy5jb25maWcuY29udGFpbmVyQ2xhc3MsIHRoaXMucG9zaXRpb24uZ2V0Q2xhc3NOYW1lKCldO1xuICAgIGlmICh0aGlzLmNvbmZpZy5jbG9zZU9uRG9jQ2xpY2spIHtcbiAgICAgIGNscyA9IGNscy5jb25jYXQoWyduby1wb2ludGVycyddKTtcbiAgICB9XG4gICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGlkJywgdGhpcy50aWQpO1xuICAgIGNzc0NsYXNzKCdhZGQnLCBjbHMsIGBbZGF0YS10aWQ9JyR7W3RoaXMudGlkXX0nXWApO1xuICAgIGNzc0NsYXNzKCdhZGQnLCBbdGhpcy5jb25maWcuYm9keUNsYXNzXSk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy5saXN0ZW5Qb3MoKS5zdWJzY3JpYmUoKTtcbiAgICBpZiAodGhpcy5jb250ZW50LnR5cGUgPT09IENvbnRlbnRUeXBlLkNPTVBPTkVOVCkge1xuICAgICAgdGhpcy5jb21wSW5zdGFuY2UgPSB0aGlzLnNldENvbXBvbmVudCh0aGlzLmNvbnRlbnQucHJvcHMpO1xuICAgICAgQnVzLnNlbmQodGhpcy50aWQsICd0X2NvbXBpbnMnLCB0aGlzLmNvbXBJbnN0YW5jZSk7XG4gICAgfVxuICB9XG5cbiAgc2V0Q29tcG9uZW50KHByb3BzKSB7XG4gICAgY29uc3QgY29tcFJlZiA9IHRoaXMuY29tcE91dGxldC5jcmVhdGVDb21wb25lbnQoXG4gICAgICB0aGlzLmNvbXBSZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeSh0aGlzLmNvbnRlbnQuZGF0YSBhcyBhbnkpXG4gICAgKTtcbiAgICBPYmplY3QuYXNzaWduKGNvbXBSZWYuaW5zdGFuY2UsIHByb3BzKTtcbiAgICBjb21wUmVmLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICByZXR1cm4gY29tcFJlZi5pbnN0YW5jZTtcbiAgfVxuXG4gIHVwZGF0ZVRleHRDb250ZW50KGRhdGE6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvbnRlbnQudHlwZSA9PT0gQ29udGVudFR5cGUuU1RSSU5HKSB7XG4gICAgICB0aGlzLmNvbnRlbnQuZGF0YSA9IGRhdGE7XG4gICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcbiAgICB9XG4gIH1cblxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICBjc3NDbGFzcygncmVtb3ZlJywgW3RoaXMuY29uZmlnLmJvZHlDbGFzc10pO1xuICAgIHRoaXMuZGllLm5leHQoMSk7XG4gICAgQnVzLnNlbmQodGhpcy50aWQsICd0X2RldGFjaCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBsaXN0ZW5Qb3MoKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gQnVzLmxpc3Rlbih0aGlzLnRpZCwgJ3RfZHlucG9zJykucGlwZShcbiAgICAgIHN0YXJ0V2l0aCgxKSxcbiAgICAgIHRha2VVbnRpbCh0aGlzLmRpZSksXG4gICAgICB0YXAoZSA9PiB7XG4gICAgICAgIGlmICghZSB8fCAhZS54KSByZXR1cm4gdGhpcy5zZXRQb3MoKTtcbiAgICAgICAgY29uc3QgY29vcmRzID0geyBsZWZ0OiBlLngsIHRvcDogZS55IH07XG4gICAgICAgIHRoaXMud3JhcHBlckVsLnN0eWxlID0gdG9Dc3MoY29vcmRzKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0UG9zKCk6IHZvaWQge1xuICAgIGNvbnN0IHsgZXh0cmEsIC4uLmNvb3JkcyB9ID0gdGhpcy5wb3NpdGlvbi5nZXRQb3NpdGlvbnModGhpcy53cmFwcGVyRWwpO1xuICAgIGlmICh0aGlzLmV4dHJhICE9PSBleHRyYSkge1xuICAgICAgdGhpcy5leHRyYSA9IGV4dHJhO1xuICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24oY29vcmRzLCB7IHZpc2liaWxpdHk6ICd2aXNpYmxlJywgb3BhY2l0eTogJzEnIH0pO1xuICAgIHRoaXMud3JhcHBlckVsLnN0eWxlID0gdG9Dc3MoY29vcmRzKTtcbiAgICBCdXMuc2VuZCh0aGlzLnRpZCwgJ3RfcG9zdXBkYXRlJyk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIEFwcGxpY2F0aW9uUmVmLFxuICBDb21wb25lbnRGYWN0b3J5LFxuICBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG4gIENvbXBvbmVudFJlZixcbiAgSW5qZWN0b3IsXG4gIFZpZXdSZWZcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBhbmltYXRpb25GcmFtZVNjaGVkdWxlciwgZnJvbUV2ZW50LCBtZXJnZSBhcyBtZXJnZU9icywgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZGVib3VuY2VUaW1lLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCwgZmlsdGVyLCBtYXAsIG9ic2VydmVPbiwgc2tpcFdoaWxlLCB0YWtlVW50aWwsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IENvbnRlbnQsIENvbnRlbnREYXRhLCBDb250ZW50UHJvcHMsIFRJRCwgVG9wcHlDb25maWcsIFRvcHB5RXZlbnROYW1lIH0gZnJvbSAnLi9tb2RlbHMnO1xuaW1wb3J0IHsgVG9wcHlQb3NpdGlvbiB9IGZyb20gJy4vcG9zaXRpb24vcG9zaXRpb24nO1xuaW1wb3J0IHsgVG9wcHlDb21wb25lbnQgfSBmcm9tICcuL3RvcHB5LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBCb2R5RWwsIEJ1cywgZ2V0Q29udGVudCB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgVG9wcHlDb250cm9sIHtcbiAgcG9zaXRpb246IFRvcHB5UG9zaXRpb247XG4gIGNvbmZpZzogVG9wcHlDb25maWc7XG4gIGNvbnRlbnQ6IENvbnRlbnQ7XG4gIHRpZDogVElEO1xuICBjb21wOiBUb3BweUNvbXBvbmVudDtcbiAgdXBkYXRlVGV4dENvbnRlbnQ6IFN1YmplY3Q8c3RyaW5nPiA9IG5ldyBTdWJqZWN0KCk7XG4gIGhvc3RWaWV3OiBWaWV3UmVmO1xuICBjb21wUmVmOiBDb21wb25lbnRSZWY8VG9wcHlDb21wb25lbnQ+O1xuXG4gIHByaXZhdGUgdmlld0VsOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBpc09wZW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBjb21wRmFjOiBDb21wb25lbnRGYWN0b3J5PFRvcHB5Q29tcG9uZW50PjtcbiAgcHJpdmF0ZSBkaWU6IFN1YmplY3Q8MT4gPSBuZXcgU3ViamVjdCgpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgYXBwUmVmOiBBcHBsaWNhdGlvblJlZixcbiAgICBwcml2YXRlIGNvbXBSZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yXG4gICkge1xuICAgIHRoaXMudXBkYXRlVGV4dENvbnRlbnQuc3Vic2NyaWJlKGNvbnRlbnQgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNPcGVuKSB0aGlzLmNvbXAudXBkYXRlVGV4dENvbnRlbnQoY29udGVudCk7XG4gICAgfSk7XG4gIH1cblxuICBvcGVuKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzT3BlbikgcmV0dXJuO1xuXG4gICAgdGhpcy5hdHRhY2goKTtcbiAgICBpZiAodGhpcy52aWV3RWwpIHtcbiAgICAgIG1lcmdlT2JzKHRoaXMub25Eb2N1bWVudENsaWNrKCksIHRoaXMub25XaW5kb3dSZXNpemUoKSwgdGhpcy5vbkVzY0NsaWNrKCkpLnN1YnNjcmliZSgpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBCdXMuc2VuZCh0aGlzLnRpZCwgJ3RfZHlucG9zJyksIDEpO1xuICAgIH1cblxuICAgIEJ1cy5zZW5kKHRoaXMudGlkLCAndF9vcGVuJyk7XG4gICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICB9XG5cbiAgY2xvc2UoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlzT3BlbikgcmV0dXJuO1xuXG4gICAgdGhpcy5kZXR0YWNoKCk7XG4gICAgdGhpcy5kaWUubmV4dCgxKTtcbiAgICBCdXMuc2VuZCh0aGlzLnRpZCwgJ3RfY2xvc2UnKTtcbiAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICB9XG5cbiAgdG9nZ2xlKCk6IHZvaWQge1xuICAgIHJldHVybiB0aGlzLmlzT3BlbiA/IHRoaXMuY2xvc2UoKSA6IHRoaXMub3BlbigpO1xuICB9XG5cbiAgb25Fc2NDbGljaygpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybiBmcm9tRXZlbnQoQm9keUVsLCAna2V5ZG93bicpLnBpcGUoXG4gICAgICB0YWtlVW50aWwodGhpcy5kaWUpLFxuICAgICAgc2tpcFdoaWxlKCgpID0+ICF0aGlzLmNvbmZpZy5jbG9zZU9uRXNjKSxcbiAgICAgIGZpbHRlcigoZTogYW55KSA9PiAoZS5rZXkgPT09ICdFc2NhcGUnIHx8IGUua2V5ID09PSAnRXNjJyB8fCBlLmtleUNvZGUgPT09IDI3KSAmJiBlLnRhcmdldC5ub2RlTmFtZSA9PT0gJ0JPRFknKSxcbiAgICAgIHRhcChlID0+IGUucHJldmVudERlZmF1bHQoKSksXG4gICAgICBtYXAoZSA9PiBlLnRhcmdldCksXG4gICAgICB0YXAoKCkgPT4gdGhpcy5jbG9zZSgpKVxuICAgICk7XG4gIH1cblxuICBvbkRvY3VtZW50Q2xpY2soKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gZnJvbUV2ZW50KHRoaXMudmlld0VsLCAnY2xpY2snKS5waXBlKFxuICAgICAgdGFrZVVudGlsKHRoaXMuZGllKSxcbiAgICAgIG1hcCgoZTogYW55KSA9PiBlLnRhcmdldCksXG4gICAgICBza2lwV2hpbGUoKCkgPT4gIXRoaXMuY29uZmlnLmNsb3NlT25Eb2NDbGljayksXG4gICAgICBmaWx0ZXIodGhpcy5pc05vdEhvc3RFbGVtZW50LmJpbmQodGhpcykpLFxuICAgICAgdGFwKCgpID0+IHtcbiAgICAgICAgdGhpcy5jb25maWcuZG9jQ2xpY2tDYWxsYmFjaygpO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBvbldpbmRvd1Jlc2l6ZSgpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGNvbnN0IG9uUmVzaXplID0gZnJvbUV2ZW50KHdpbmRvdywgJ3Jlc2l6ZScpO1xuICAgIGNvbnN0IG9uU2Nyb2xsID0gZnJvbUV2ZW50KHdpbmRvdywgJ3Njcm9sbCcsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICByZXR1cm4gbWVyZ2VPYnMob25SZXNpemUsIG9uU2Nyb2xsKS5waXBlKFxuICAgICAgc2tpcFdoaWxlKCgpID0+ICF0aGlzLmNvbmZpZy5saXN0ZW5XaW5kb3dFdmVudHMpLFxuICAgICAgdGFrZVVudGlsKHRoaXMuZGllKSxcbiAgICAgIGRlYm91bmNlVGltZSg1KSxcbiAgICAgIG9ic2VydmVPbihhbmltYXRpb25GcmFtZVNjaGVkdWxlciksXG4gICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpLFxuICAgICAgdGFwKCgpID0+IHtcbiAgICAgICAgQnVzLnNlbmQodGhpcy50aWQsICd0X2R5bnBvcycpO1xuICAgICAgICB0aGlzLmNvbmZpZy53aW5kb3dSZXNpemVDYWxsYmFjaygpO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgY2hhbmdlUG9zaXRpb24obmV3UG9zaXRpb246IFRvcHB5UG9zaXRpb24pOiB2b2lkIHtcbiAgICB0aGlzLnBvc2l0aW9uID0gbmV3UG9zaXRpb247XG4gIH1cblxuICB1cGRhdGVQb3NpdGlvbihwb3NpdGlvbkNvbmZpZzogYW55KTogdm9pZCB7XG4gICAgdGhpcy5wb3NpdGlvbi51cGRhdGVDb25maWcocG9zaXRpb25Db25maWcpO1xuICB9XG5cbiAgdXBkYXRlQ29udGVudChjb250ZW50OiBDb250ZW50RGF0YSwgcHJvcHM6IENvbnRlbnRQcm9wcyA9IHt9KTogdm9pZCB7XG4gICAgdGhpcy5jb250ZW50ID0gZ2V0Q29udGVudChjb250ZW50LCB7IC4uLnRoaXMuY29udGVudC5wcm9wcywgLi4ucHJvcHMgfSk7XG4gIH1cblxuICBsaXN0ZW4oZXZlbnROYW1lOiBUb3BweUV2ZW50TmFtZSkge1xuICAgIHJldHVybiBCdXMubGlzdGVuKHRoaXMudGlkLCBldmVudE5hbWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBpc05vdEhvc3RFbGVtZW50KGVsKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgd3JhcHBlckVsID0gdGhpcy52aWV3RWwucXVlcnlTZWxlY3RvcignLnQtd3JhcHBlcicpO1xuICAgIHJldHVybiBlbCAhPT0gd3JhcHBlckVsICYmICF3cmFwcGVyRWwuY29udGFpbnMoZWwpO1xuICB9XG5cbiAgcHJpdmF0ZSBhdHRhY2goKTogdm9pZCB7XG4gICAgLyogY3JlYXRlIGNvbXBvbmVudCAqL1xuICAgIHRoaXMuY29tcEZhYyA9IHRoaXMuY29tcFJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KFRvcHB5Q29tcG9uZW50KTtcbiAgICB0aGlzLmNvbXBSZWYgPSB0aGlzLmNvbXBGYWMuY3JlYXRlKHRoaXMuaW5qZWN0b3IpO1xuICAgIHRoaXMuY29tcCA9IHRoaXMuY29tcFJlZi5pbnN0YW5jZTtcblxuICAgIC8qIGFzc2lnbiBwcm9wcyAqL1xuICAgIGNvbnN0IHsgcG9zaXRpb24sIGNvbnRlbnQsIGNvbmZpZywgdGlkIH0gPSB0aGlzO1xuICAgIGNvbnRlbnQucHJvcHMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbXAsIHsgcG9zaXRpb24sIGNvbnRlbnQsIGNvbmZpZywgdGlkIH0pO1xuXG4gICAgLyogYXR0YWNoIHZpZXcgKi9cbiAgICB0aGlzLmhvc3RWaWV3ID0gdGhpcy5jb21wUmVmLmhvc3RWaWV3O1xuICAgIHRoaXMuYXBwUmVmLmF0dGFjaFZpZXcodGhpcy5ob3N0Vmlldyk7XG4gICAgdGhpcy52aWV3RWwgPSAodGhpcy5ob3N0VmlldyBhcyBhbnkpLnJvb3ROb2Rlc1swXTtcbiAgICBCb2R5RWwuYXBwZW5kQ2hpbGQodGhpcy52aWV3RWwpO1xuICB9XG5cbiAgcHJpdmF0ZSBkZXR0YWNoKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5ob3N0VmlldykgcmV0dXJuO1xuXG4gICAgdGhpcy5hcHBSZWYuZGV0YWNoVmlldyh0aGlzLmhvc3RWaWV3KTtcbiAgICB0aGlzLmNvbXBSZWYuZGVzdHJveSgpO1xuICAgIHRoaXMuaG9zdFZpZXcgPSB0aGlzLnZpZXdFbCA9IHRoaXMuY29tcCA9IG51bGw7XG4gIH1cbn1cbiIsImltcG9ydCB7IEFwcGxpY2F0aW9uUmVmLCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIEluamVjdGFibGUsIEluamVjdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBEZWZhdWx0Q29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgQ29udGVudERhdGEsIENvbnRlbnRQcm9wcywgQ29udGVudFR5cGUsIElucHV0cywgSW5zaWRlUGxhY2VtZW50LCBUSUQsIFRvcHB5Q29uZmlnIH0gZnJvbSAnLi9tb2RlbHMnO1xuaW1wb3J0IHsgR2xvYmFsUG9zaXRpb24gfSBmcm9tICcuL3Bvc2l0aW9uJztcbmltcG9ydCB7IFRvcHB5UG9zaXRpb24gfSBmcm9tICcuL3Bvc2l0aW9uL3Bvc2l0aW9uJztcbmltcG9ydCB7IFRvcHB5Q29udHJvbCB9IGZyb20gJy4vdG9wcHktY29udHJvbCc7XG5pbXBvcnQgeyBCdXMsIGNyZWF0ZUlkLCBnZXRDb250ZW50IH0gZnJvbSAnLi91dGlscyc7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIFRvcHB5IHtcbiAgc3RhdGljIGNvbnRyb2xzOiB7IFtrZXk6IHN0cmluZ106IFRvcHB5Q29udHJvbCB9ID0ge307XG4gIHByaXZhdGUgdGlkOiBUSUQ7XG4gIHByaXZhdGUgaW5wdXRzOiBJbnB1dHMgPSB7XG4gICAgcG9zaXRpb246IG51bGwsXG4gICAgY29uZmlnOiBEZWZhdWx0Q29uZmlnLFxuICAgIGNvbnRlbnQ6IHsgdHlwZTogQ29udGVudFR5cGUuU1RSSU5HLCBkYXRhOiAnaGVsbG8nLCBwcm9wczoge30gfSxcbiAgICB0aWQ6IG51bGxcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGluamVjdG9yOiBJbmplY3Rvcikge1xuICAgIHRoaXMuaW5wdXRzLnBvc2l0aW9uID0gbmV3IEdsb2JhbFBvc2l0aW9uKHsgcGxhY2VtZW50OiBJbnNpZGVQbGFjZW1lbnQuVE9QIH0pO1xuICB9XG5cbiAgcG9zaXRpb24ocG9zaXRpb246IFRvcHB5UG9zaXRpb24pOiBUb3BweSB7XG4gICAgdGhpcy5pbnB1dHMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGNvbmZpZyhjb25maWc6IFBhcnRpYWw8VG9wcHlDb25maWc+KTogVG9wcHkge1xuICAgIHRoaXMuaW5wdXRzLmNvbmZpZyA9IHsgLi4uRGVmYXVsdENvbmZpZywgLi4uY29uZmlnIH07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjb250ZW50KGRhdGE6IENvbnRlbnREYXRhLCBwcm9wczogQ29udGVudFByb3BzID0ge30pOiBUb3BweSB7XG4gICAgdGhpcy5pbnB1dHMuY29udGVudCA9IGdldENvbnRlbnQoZGF0YSwgcHJvcHMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgY3JlYXRlKGtleTogc3RyaW5nID0gbnVsbCk6IFRvcHB5Q29udHJvbCB7XG4gICAgdGhpcy50aWQgPSB0aGlzLmlucHV0cy50aWQgPSBrZXkgfHwgY3JlYXRlSWQoKTtcblxuICAgIGNvbnN0IGluamVjdG9yID0gSW5qZWN0b3IuY3JlYXRlKFxuICAgICAgW1xuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogVG9wcHlDb250cm9sLFxuICAgICAgICAgIGRlcHM6IFtBcHBsaWNhdGlvblJlZiwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBJbmplY3Rvcl1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHRoaXMuaW5qZWN0b3JcbiAgICApO1xuXG4gICAgY29uc3QgdGMgPSBpbmplY3Rvci5nZXQoVG9wcHlDb250cm9sKTtcbiAgICBpZiAoVG9wcHkuY29udHJvbHNbdGhpcy50aWRdKSB7XG4gICAgICB0aGlzLnRpZCA9IGNyZWF0ZUlkKCk7XG4gICAgfVxuICAgIHRoaXMuaW5wdXRzLnBvc2l0aW9uLmluaXQodGhpcy50aWQpO1xuICAgIFRvcHB5LmNvbnRyb2xzW3RoaXMudGlkXSA9IE9iamVjdC5hc3NpZ24odGMsIHRoaXMuaW5wdXRzKTtcbiAgICByZXR1cm4gdGM7XG4gIH1cblxuICBnZXRDdHJsKHRpZDogVElEKTogVG9wcHlDb250cm9sIHtcbiAgICByZXR1cm4gVG9wcHkuY29udHJvbHNbdGlkXTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmZvcmluXG4gICAgZm9yIChjb25zdCBrZXkgaW4gVG9wcHkuY29udHJvbHMpIHtcbiAgICAgIFRvcHB5LmNvbnRyb2xzW2tleV0uY2xvc2UoKTtcbiAgICB9XG4gICAgVG9wcHkuY29udHJvbHMgPSB7fTtcbiAgICBCdXMuc3RvcCgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFRvcHB5Q29tcG9uZW50IH0gZnJvbSAnLi90b3BweS5jb21wb25lbnQnO1xuXG5ATmdNb2R1bGUoe1xuICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlXSxcbiAgZGVjbGFyYXRpb25zOiBbVG9wcHlDb21wb25lbnRdLFxuICBlbnRyeUNvbXBvbmVudHM6IFtUb3BweUNvbXBvbmVudF1cbn0pXG5leHBvcnQgY2xhc3MgVG9wcHlNb2R1bGUge31cbiJdLCJuYW1lcyI6WyJ0c2xpYl8xLl9fZXh0ZW5kcyIsInRzbGliXzEuX192YWx1ZXMiLCJtZXJnZU9icyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0lBZUUsS0FBTSxHQUFHO0lBQ1QsTUFBTyxHQUFHO0lBQ1YsT0FBUSxHQUFHO0lBQ1gsUUFBUyxHQUFHO0lBQ1osVUFBVyxJQUFJO0lBQ2YsV0FBWSxJQUFJO0lBQ2hCLGFBQWMsSUFBSTtJQUNsQixjQUFlLElBQUk7Ozs7SUFJbkIsVUFBVyxJQUFJO0lBQ2YsV0FBWSxJQUFJO0lBQ2hCLGFBQWMsSUFBSTtJQUNsQixjQUFlLElBQUk7Ozs7SUFJbkIsUUFBUyxHQUFHOzs7QUFFZCxJQUFhLGdCQUFnQixnQkFDeEIsQ0FBQyxFQUNELENBQUMsQ0FDTDs7QUFDRCxJQUFhLGVBQWUsZ0JBQ3ZCLENBQUMsRUFDRCxDQUFDLENBQ0w7OztJQUtDLE1BQU8sR0FBRztJQUNWLE9BQVEsR0FBRzs7Ozs7Ozs7OztBQ2hEYjs7OztJQUFBO1FBQ1ksV0FBTSxHQUFHLEVBQUUsQ0FBQztLQVl2Qjs7OztJQVRDLG9DQUFZOzs7SUFBWjtRQUNFLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztLQUNuRTs7Ozs7SUFFRCxvQ0FBWTs7OztJQUFaLFVBQWEsTUFBTTtRQUNqQixJQUFJLENBQUMsTUFBTSxnQkFBUSxJQUFJLENBQUMsTUFBTSxFQUFLLE1BQU0sQ0FBRSxDQUFDO0tBQzdDOzs7OztJQUVELDRCQUFJOzs7O0lBQUosVUFBSyxHQUFXLEtBQUk7SUFDdEIsb0JBQUM7Q0FBQSxJQUFBOzs7Ozs7O0lDVnVDQSxzQ0FBYTtJQUFyRDs7S0FJQzs7OztJQUhDLHlDQUFZOzs7SUFBWjtRQUNFLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFFBQVEs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LEtBQUssR0FBRyxFQUFFO1lBQ2pELENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7U0FDNUM7UUFDRCxJQUFJLElBQUksS0FBSyxHQUFHLEVBQUU7WUFDaEIsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7U0FDaEM7UUFDRCxJQUFJLElBQUksS0FBSyxHQUFHLEVBQUU7WUFDaEIsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDO1NBQ3BCO1FBRUQsSUFBSSxJQUFJLEtBQUssR0FBRyxFQUFFO1lBQ2hCLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1NBQy9CO1FBQ0QsSUFBSSxJQUFJLEtBQUssR0FBRyxFQUFFO1lBQ2hCLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDO1NBQzlCO1FBQ0QsSUFBSSxJQUFJLEtBQUssR0FBRyxJQUFJLElBQUksS0FBSyxHQUFHLEVBQUU7WUFDaEMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQztTQUNsRDtRQUNELElBQUksR0FBRyxLQUFLLEdBQUcsS0FBSyxJQUFJLEtBQUssR0FBRyxJQUFJLElBQUksS0FBSyxHQUFHLENBQUMsRUFBRTtZQUNqRCxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUM7U0FDakI7UUFDRCxJQUFJLEdBQUcsS0FBSyxHQUFHLEtBQUssSUFBSSxLQUFLLEdBQUcsSUFBSSxJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUU7WUFDakQsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFH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