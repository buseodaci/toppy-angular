(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs'), require('rxjs/operators'), require('@angular/common')) :
    typeof define === 'function' && define.amd ? define('toppy', ['exports', '@angular/core', 'rxjs', 'rxjs/operators', '@angular/common'], factory) :
    (factory((global.toppy = {}),global.ng.core,global.rxjs,global.rxjs.operators,global.ng.common));
}(this, (function (exports,i0,rxjs,operators,common) { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    /* global Reflect, Promise */
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b)
                if (b.hasOwnProperty(p))
                    d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    var __assign = function () {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s)
                    if (Object.prototype.hasOwnProperty.call(s, p))
                        t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };
    function __rest(s, e) {
        var t = {};
        for (var p in s)
            if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
                t[p] = s[p];
        if (s != null && typeof Object.getOwnPropertySymbols === "function")
            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++)
                if (e.indexOf(p[i]) < 0)
                    t[p[i]] = s[p[i]];
        return t;
    }
    function __values(o) {
        var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
        if (m)
            return m.call(o);
        return {
            next: function () {
                if (o && i >= o.length)
                    o = void 0;
                return { value: o && o[i++], done: !o };
            }
        };
    }
    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m)
            return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
                ar.push(r.value);
        }
        catch (error) {
            e = { error: error };
        }
        finally {
            try {
                if (r && !r.done && (m = i["return"]))
                    m.call(i);
            }
            finally {
                if (e)
                    throw e.error;
            }
        }
        return ar;
    }
    function __spread() {
        for (var ar = [], i = 0; i < arguments.length; i++)
            ar = ar.concat(__read(arguments[i]));
        return ar;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var p = {
        TOP: 't',
        LEFT: 'l',
        RIGHT: 'r',
        BOTTOM: 'b',
        TOP_LEFT: 'tl',
        TOP_RIGHT: 'tr',
        BOTTOM_LEFT: 'bl',
        BOTTOM_RIGHT: 'br',
    };
    /** @enum {string} */
    var o = {
        LEFT_TOP: 'lt',
        RIGHT_TOP: 'rt',
        LEFT_BOTTOM: 'lb',
        RIGHT_BOTTOM: 'rb',
    };
    /** @enum {string} */
    var i = {
        CENTER: 'c',
    };
    /** @type {?} */
    var OutsidePlacement = __assign({}, p, o);
    /** @type {?} */
    var InsidePlacement = __assign({}, p, i);
    /** @enum {string} */
    var SlidePlacement = {
        LEFT: 'l',
        RIGHT: 'r',
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @abstract
     */
    var /**
     * @abstract
     */ ToppyPosition = /** @class */ (function () {
        function ToppyPosition() {
            this.config = {};
        }
        /**
         * @return {?}
         */
        ToppyPosition.prototype.getClassName = /**
         * @return {?}
         */
            function () {
                return this.constructor.name.replace('Pos', '-pos').toLowerCase();
            };
        /**
         * @param {?} config
         * @return {?}
         */
        ToppyPosition.prototype.updateConfig = /**
         * @param {?} config
         * @return {?}
         */
            function (config) {
                this.config = __assign({}, this.config, config);
            };
        /**
         * @param {?} tid
         * @return {?}
         */
        ToppyPosition.prototype.init = /**
         * @param {?} tid
         * @return {?}
         */
            function (tid) { };
        return ToppyPosition;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var FullscreenPosition = /** @class */ (function (_super) {
        __extends(FullscreenPosition, _super);
        function FullscreenPosition() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @return {?}
         */
        FullscreenPosition.prototype.getPositions = /**
         * @return {?}
         */
            function () {
                return { top: 0, left: 0, width: '100%', height: '100%', position: 'fixed' };
            };
        return FullscreenPosition;
    }(ToppyPosition));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @param {?} data
     * @param {?=} props
     * @return {?}
     */
    function getContent(data, props) {
        if (props === void 0) {
            props = {};
        }
        /** @type {?} */
        var type = "c" /* COMPONENT */;
        if (typeof data === 'string' && props['hasHTML'])
            type = "h" /* HTML */;
        else if (typeof data === 'string')
            type = "s" /* STRING */;
        else if (data instanceof i0.TemplateRef)
            type = "t" /* TEMPLATE */;
        return { data: data, type: type, props: props };
    }
    /**
     * @return {?}
     */
    function createId() {
        return Math.random()
            .toString(36)
            .substr(2, 5);
    }
    /* html dom utils */
    /**
     * @param {?} method
     * @param {?} cls
     * @param {?=} target
     * @return {?}
     */
    function cssClass(method, cls, target) {
        if (target === void 0) {
            target = 'body';
        }
        var _a;
        (_a = document.querySelector(target).classList)[method].apply(_a, __spread(cls));
    }
    /**
     * @param {?} styleObj
     * @return {?}
     */
    function toCss(styleObj) {
        return Object.keys(styleObj)
            .map(function (x) { return x + ":" + styleObj[x] + (typeof styleObj[x] === 'number' ? 'px' : ''); })
            .join(';');
    }
    /**
     * @param {?} max
     * @param {?} percentage
     * @return {?}
     */
    function percentToCss(max, percentage) {
        /** @type {?} */
        var number = Number(percentage.slice(0, -1));
        if (number > 100) {
            number = 100;
        }
        return "calc(" + max + "px - " + (100 - number) + "%)";
    }
    /**
     * @param {?} src
     * @param {?} host
     * @param {?} key
     * @param {?} value
     * @return {?}
     */
    function setWH(src, host, key, value) {
        if (typeof value === 'number') {
            host[key] = value = Math.abs(value);
        }
        if (typeof value === 'string' && value.endsWith('%')) {
            value = percentToCss(src[key], value);
        }
        return value;
    }
    /** @type {?} */
    var BodyEl = document.querySelector('body');
    /* events */
    var /* events */ BusClass = /** @class */ (function () {
        function BusClass() {
            this._e = new rxjs.Subject();
        }
        /**
         * @param {?} from
         * @param {?} name
         * @param {?=} data
         * @return {?}
         */
        BusClass.prototype.send = /**
         * @param {?} from
         * @param {?} name
         * @param {?=} data
         * @return {?}
         */
            function (from, name, data) {
                if (data === void 0) {
                    data = null;
                }
                this._e.next({ from: from, name: name, data: data });
            };
        /**
         * @param {?} from
         * @param {?} name
         * @return {?}
         */
        BusClass.prototype.listen = /**
         * @param {?} from
         * @param {?} name
         * @return {?}
         */
            function (from, name) {
                return this._e.asObservable().pipe(operators.filter(function (e) { return e.from === from && e.name === name; }), operators.map(function (e) { return e.data; }));
            };
        /**
         * @return {?}
         */
        BusClass.prototype.stop = /**
         * @return {?}
         */
            function () {
                this._e.complete();
            };
        return BusClass;
    }());
    /** @type {?} */
    var Bus = new BusClass();

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GlobalPosition = /** @class */ (function (_super) {
        __extends(GlobalPosition, _super);
        function GlobalPosition(config) {
            var _this = _super.call(this) || this;
            _this.config = { placement: InsidePlacement.CENTER, width: 100, height: 100, offset: 0 };
            _this.updateConfig(config);
            return _this;
        }
        /**
         * @param {?=} hostEl
         * @return {?}
         */
        GlobalPosition.prototype.getPositions = /**
         * @param {?=} hostEl
         * @return {?}
         */
            function (hostEl) {
                /** @type {?} */
                var host = ( /** @type {?} */(hostEl.getBoundingClientRect()));
                /** @type {?} */
                var src = {
                    width: window['innerWidth'],
                    height: window['innerHeight']
                };
                var _a = this.config, w = _a.width, h = _a.height;
                w = setWH(src, host, 'width', w);
                h = setWH(src, host, 'height', h);
                /** @type {?} */
                var props = this.calc(this.config.placement, src, host);
                return __assign({}, props, { width: w, height: h, position: 'fixed', extra: this.config.placement });
            };
        /**
         * @private
         * @param {?} placement
         * @param {?} src
         * @param {?} host
         * @return {?}
         */
        GlobalPosition.prototype.calc = /**
         * @private
         * @param {?} placement
         * @param {?} src
         * @param {?} host
         * @return {?}
         */
            function (placement, src, host) {
                var _a = __read(placement.split(''), 2), main = _a[0], sub = _a[1];
                /** @type {?} */
                var p = {};
                if (main === 't') {
                    p.top = this.config.offset;
                }
                if (main === 'b') {
                    p.bottom = this.config.offset;
                }
                if ((main === 'l' || main === 'r' || main === 'c') && !sub) {
                    p.top = (src.height - host.height) / 2;
                }
                if ((main === 't' || main === 'b' || main === 'c') && !sub) {
                    p.left = (src.width - host.width) / 2;
                }
                if ((main === 'l' && !sub) || sub === 'l') {
                    p.left = this.config.offset;
                }
                if ((main === 'r' && !sub) || sub === 'r') {
                    p.right = this.config.offset;
                }
                return p;
            };
        return GlobalPosition;
    }(ToppyPosition));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var RelativePosition = /** @class */ (function (_super) {
        __extends(RelativePosition, _super);
        function RelativePosition(config) {
            var _this = _super.call(this) || this;
            _this.config = {
                src: null,
                placement: OutsidePlacement.TOP,
                autoUpdate: false,
                width: 'auto',
                height: 'auto'
            };
            _this.updateConfig(config);
            return _this;
        }
        /**
         * @param {?} tid
         * @return {?}
         */
        RelativePosition.prototype.init = /**
         * @param {?} tid
         * @return {?}
         */
            function (tid) {
                if (this.config.autoUpdate)
                    this.listenDrag(tid);
            };
        /**
         * @param {?} targetEl
         * @return {?}
         */
        RelativePosition.prototype.getPositions = /**
         * @param {?} targetEl
         * @return {?}
         */
            function (targetEl) {
                /** @type {?} */
                var s = this.getCoords(this.config.src);
                /** @type {?} */
                var h = this.getCoords(targetEl);
                var _a = this.config, w = _a.width, ht = _a.height;
                w = setWH(s, h, 'width', w);
                ht = setWH(s, h, 'height', ht);
                var _b = this.calculatePos(this.config.placement, s, h), pos = _b.pos, props = _b.props;
                return __assign({}, this.round(props), { width: w, height: ht, extra: pos });
            };
        /**
         * @private
         * @param {?} elem
         * @return {?}
         */
        RelativePosition.prototype.getCoords = /**
         * @private
         * @param {?} elem
         * @return {?}
         */
            function (elem) {
                return elem.getBoundingClientRect();
            };
        /**
         * @private
         * @param {?} placement
         * @param {?} src
         * @param {?} host
         * @return {?}
         */
        RelativePosition.prototype.calc = /**
         * @private
         * @param {?} placement
         * @param {?} src
         * @param {?} host
         * @return {?}
         */
            function (placement, src, host) {
                var _a = __read(placement.split(''), 2), main = _a[0], sub = _a[1];
                /** @type {?} */
                var p = { left: 0, top: 0 };
                if ((main === 't' || main === 'b') && !sub) {
                    p.left = src.left + (src.width - host.width) / 2;
                }
                if ((main === 't' || main === 'b') && sub) {
                    p.left = src.left;
                }
                if ((main === 't' || main === 'b') && sub === 'r') {
                    p.left = src.left + src.width - host.width;
                }
                if (main === 'l') {
                    p.left = src.left - host.width;
                }
                if (main === 'r') {
                    p.left = src.right;
                }
                if (main === 't') {
                    p.top = src.top - host.height;
                }
                if (main === 'b') {
                    p.top = src.top + src.height;
                }
                if (main === 'l' || main === 'r') {
                    p.top = src.top + (src.height - host.height) / 2;
                }
                if (sub === 't' && (main === 'l' || main === 'r')) {
                    p.top = src.top;
                }
                if (sub === 'b' && (main === 'l' || main === 'r')) {
                    p.top = src.top + src.height - host.height;
                }
                return p;
            };
        /**
         * @private
         * @param {?} pos
         * @param {?} s
         * @param {?} h
         * @param {?=} c
         * @return {?}
         */
        RelativePosition.prototype.calculatePos = /**
         * @private
         * @param {?} pos
         * @param {?} s
         * @param {?} h
         * @param {?=} c
         * @return {?}
         */
            function (pos, s, h, c) {
                if (c === void 0) {
                    c = true;
                }
                /** @type {?} */
                var props = this.calc(pos, s, h);
                if (c && this.config.autoUpdate && this.isOverflowed(__assign({}, props, { width: h.width, height: h.height }))) {
                    return this.calculatePos(this.nextPosition(pos), s, h, false);
                }
                return { pos: pos, props: props };
            };
        /**
         * @private
         * @param {?} props
         * @return {?}
         */
        RelativePosition.prototype.isOverflowed = /**
         * @private
         * @param {?} props
         * @return {?}
         */
            function (props) {
                var innerHeight = window.innerHeight, innerWidth = window.innerWidth;
                props.bottom = props.top + props.height;
                props.right = props.left + props.width;
                return props.bottom > innerHeight || props.top <= 0 || props.left <= 0 || props.right > innerWidth;
            };
        /**
         * @private
         * @param {?} current
         * @return {?}
         */
        RelativePosition.prototype.nextPosition = /**
         * @private
         * @param {?} current
         * @return {?}
         */
            function (current) {
                /** @type {?} */
                var placements = ['t', 'b', 'l', 'r', 'tl', 'bl', 'tr', 'br', 'lt', 'rt', 'lb', 'rb'];
                /** @type {?} */
                var index = placements.indexOf(current);
                /** @type {?} */
                var even = index % 2 === 0;
                return even ? placements[index + 1] : placements[index - 1];
            };
        /**
         * @private
         * @param {?} props
         * @return {?}
         */
        RelativePosition.prototype.round = /**
         * @private
         * @param {?} props
         * @return {?}
         */
            function (props) {
                Object.keys(props).forEach(function (x) { return (props[x] = Math.round(props[x])); });
                return props;
            };
        /**
         * @private
         * @param {?} tid
         * @return {?}
         */
        RelativePosition.prototype.listenDrag = /**
         * @private
         * @param {?} tid
         * @return {?}
         */
            function (tid) {
                if (this.obs)
                    this.obs.disconnect();
                this.obs = new MutationObserver(function (mutationsList) {
                    var e_1, _a;
                    try {
                        for (var mutationsList_1 = __values(mutationsList), mutationsList_1_1 = mutationsList_1.next(); !mutationsList_1_1.done; mutationsList_1_1 = mutationsList_1.next()) {
                            var mutation = mutationsList_1_1.value;
                            if (mutation.type === 'attributes')
                                Bus.send(tid, 't_dynpos');
                        }
                    }
                    catch (e_1_1) {
                        e_1 = { error: e_1_1 };
                    }
                    finally {
                        try {
                            if (mutationsList_1_1 && !mutationsList_1_1.done && (_a = mutationsList_1.return))
                                _a.call(mutationsList_1);
                        }
                        finally {
                            if (e_1)
                                throw e_1.error;
                        }
                    }
                });
                this.obs.observe(this.config.src, {
                    attributeFilter: ['style']
                });
            };
        return RelativePosition;
    }(ToppyPosition));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SlidePosition = /** @class */ (function (_super) {
        __extends(SlidePosition, _super);
        function SlidePosition(config) {
            var _this = _super.call(this) || this;
            _this.config = { placement: SlidePlacement.LEFT, width: '30%' };
            _this.config = __assign({}, _this.config, config);
            return _this;
        }
        /**
         * @return {?}
         */
        SlidePosition.prototype.getPositions = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var props = this.config.placement === SlidePlacement.LEFT ? { left: 0 } : { right: 0 };
                return __assign({}, props, { top: 0, width: this.config.width, height: '100%', position: 'fixed', extra: this.config.placement });
            };
        return SlidePosition;
    }(ToppyPosition));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var DefaultConfig = {
        containerClass: 't-overlay',
        bodyClass: 't-open',
        wrapperClass: '',
        backdropClass: '',
        backdrop: false,
        closeOnDocClick: false,
        listenWindowEvents: true,
        closeOnEsc: false,
        windowResizeCallback: function () { },
        docClickCallback: function () { }
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ToppyComponent = /** @class */ (function () {
        function ToppyComponent(inj, cd, compResolver, elRef) {
            this.inj = inj;
            this.cd = cd;
            this.compResolver = compResolver;
            this.elRef = elRef;
            this.content = {
                type: "s" /* STRING */,
                data: '',
                props: {}
            };
            this.die = new rxjs.Subject();
            this.pinj = i0.Injector;
        }
        /**
         * @return {?}
         */
        ToppyComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this.el = this.elRef.nativeElement;
                this.wrapperEl = this.el.querySelector('.t-wrapper');
                /** @type {?} */
                var cls = ['t-container', this.config.containerClass, this.position.getClassName()];
                if (this.config.closeOnDocClick) {
                    cls = cls.concat(['no-pointers']);
                }
                this.el.setAttribute('data-tid', this.tid);
                cssClass('add', cls, "[data-tid='" + [this.tid] + "']");
                cssClass('add', [this.config.bodyClass]);
            };
        /**
         * @return {?}
         */
        ToppyComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
                this.listenPos().subscribe();
                if (this.content.type === "c" /* COMPONENT */) {
                    this.compInstance = this.setComponent(this.content.props);
                    Bus.send(this.tid, 't_compins', this.compInstance);
                }
            };
        /**
         * @param {?} props
         * @return {?}
         */
        ToppyComponent.prototype.setComponent = /**
         * @param {?} props
         * @return {?}
         */
            function (props) {
                /** @type {?} */
                var compRef = this.compOutlet.createComponent(this.compResolver.resolveComponentFactory(( /** @type {?} */(this.content.data))));
                Object.assign(compRef.instance, props);
                compRef.changeDetectorRef.detectChanges();
                return compRef.instance;
            };
        /**
         * @param {?} data
         * @return {?}
         */
        ToppyComponent.prototype.updateTextContent = /**
         * @param {?} data
         * @return {?}
         */
            function (data) {
                if (this.content.type === "s" /* STRING */) {
                    this.content.data = data;
                    this.cd.detectChanges();
                }
            };
        /**
         * @return {?}
         */
        ToppyComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                cssClass('remove', [this.config.bodyClass]);
                this.die.next(1);
                Bus.send(this.tid, 't_detach');
            };
        /**
         * @private
         * @return {?}
         */
        ToppyComponent.prototype.listenPos = /**
         * @private
         * @return {?}
         */
            function () {
                var _this = this;
                return Bus.listen(this.tid, 't_dynpos').pipe(operators.startWith(1), operators.takeUntil(this.die), operators.tap(function (e) {
                    if (!e || !e.x)
                        return _this.setPos();
                    /** @type {?} */
                    var coords = { left: e.x, top: e.y };
                    _this.wrapperEl.style = toCss(coords);
                }));
            };
        /**
         * @private
         * @return {?}
         */
        ToppyComponent.prototype.setPos = /**
         * @private
         * @return {?}
         */
            function () {
                var _a = this.position.getPositions(this.wrapperEl), extra = _a.extra, coords = __rest(_a, ["extra"]);
                if (this.extra !== extra) {
                    this.extra = extra;
                    this.cd.detectChanges();
                }
                Object.assign(coords, { visibility: 'visible', opacity: '1' });
                this.wrapperEl.style = toCss(coords);
                Bus.send(this.tid, 't_posupdate');
            };
        ToppyComponent.decorators = [
            { type: i0.Component, args: [{
                        // tslint:disable-next-line:component-selector
                        selector: 'toppy',
                        template: "<div class=\"t-backdrop\" *ngIf=\"config.backdrop\" [ngClass]=\"config.backdropClass\"></div>\n<div class=\"t-wrapper\" [ngClass]=\"config.wrapperClass\" [class]=\"extra\" #wrapperEl>\n  <ng-container [ngSwitch]=\"content.type\">\n    <ng-container *ngSwitchCase=\"'s'\">\n      <div [class]=\"content.props.class\">{{ content.data }}</div>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"'h'\"> <div [innerHTML]=\"content.data\"></div> </ng-container>\n    <ng-container *ngSwitchCase=\"'t'\">\n      <ng-container *ngTemplateOutlet=\"content.data; context: { $implicit: content.props }\"></ng-container>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"'c'\"> <ng-template #compOutlet></ng-template> </ng-container>\n  </ng-container>\n</div>\n",
                        changeDetection: i0.ChangeDetectionStrategy.OnPush,
                        styles: [":host{left:0;position:fixed;top:0;width:100%;height:100%;pointer-events:none}:host.no-pointers{pointer-events:all}:host .t-backdrop{left:0;position:fixed;top:0;width:100%;height:100%;background:rgba(0,0,0,.5)}:host>div.t-wrapper{position:absolute;visibility:hidden;opacity:0;transition:opacity .2s;overflow:hidden;pointer-events:all}"]
                    }] }
        ];
        /** @nocollapse */
        ToppyComponent.ctorParameters = function () {
            return [
                { type: i0.Injector },
                { type: i0.ChangeDetectorRef },
                { type: i0.ComponentFactoryResolver },
                { type: i0.ElementRef }
            ];
        };
        ToppyComponent.propDecorators = {
            compOutlet: [{ type: i0.ViewChild, args: ['compOutlet', { read: i0.ViewContainerRef },] }]
        };
        return ToppyComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ToppyControl = /** @class */ (function () {
        function ToppyControl(appRef, compResolver, injector) {
            var _this = this;
            this.appRef = appRef;
            this.compResolver = compResolver;
            this.injector = injector;
            this.updateTextContent = new rxjs.Subject();
            this.isOpen = false;
            this.die = new rxjs.Subject();
            this.updateTextContent.subscribe(function (content) {
                if (_this.isOpen)
                    _this.comp.updateTextContent(content);
            });
        }
        /**
         * @return {?}
         */
        ToppyControl.prototype.open = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.isOpen)
                    return;
                this.attach();
                if (this.viewEl) {
                    rxjs.merge(this.onDocumentClick(), this.onWindowResize(), this.onEscClick()).subscribe();
                    setTimeout(function () { return Bus.send(_this.tid, 't_dynpos'); }, 1);
                }
                Bus.send(this.tid, 't_open');
                this.isOpen = true;
            };
        /**
         * @return {?}
         */
        ToppyControl.prototype.close = /**
         * @return {?}
         */
            function () {
                if (!this.isOpen)
                    return;
                this.dettach();
                this.die.next(1);
                Bus.send(this.tid, 't_close');
                this.isOpen = false;
            };
        /**
         * @return {?}
         */
        ToppyControl.prototype.toggle = /**
         * @return {?}
         */
            function () {
                return this.isOpen ? this.close() : this.open();
            };
        /**
         * @return {?}
         */
        ToppyControl.prototype.onEscClick = /**
         * @return {?}
         */
            function () {
                var _this = this;
                return rxjs.fromEvent(BodyEl, 'keydown').pipe(operators.takeUntil(this.die), operators.skipWhile(function () { return !_this.config.closeOnEsc; }), operators.filter(function (e) { return (e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27) && e.target.nodeName === 'BODY'; }), operators.tap(function (e) { return e.preventDefault(); }), operators.map(function (e) { return e.target; }), operators.tap(function () { return _this.close(); }));
            };
        /**
         * @return {?}
         */
        ToppyControl.prototype.onDocumentClick = /**
         * @return {?}
         */
            function () {
                var _this = this;
                return rxjs.fromEvent(this.viewEl, 'click').pipe(operators.takeUntil(this.die), operators.map(function (e) { return e.target; }), operators.skipWhile(function () { return !_this.config.closeOnDocClick; }), operators.filter(this.isNotHostElement.bind(this)), operators.tap(function () {
                    _this.config.docClickCallback();
                    _this.close();
                }));
            };
        /**
         * @return {?}
         */
        ToppyControl.prototype.onWindowResize = /**
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var onResize = rxjs.fromEvent(window, 'resize');
                /** @type {?} */
                var onScroll = rxjs.fromEvent(window, 'scroll', { passive: true });
                return rxjs.merge(onResize, onScroll).pipe(operators.skipWhile(function () { return !_this.config.listenWindowEvents; }), operators.takeUntil(this.die), operators.debounceTime(5), operators.observeOn(rxjs.animationFrameScheduler), operators.distinctUntilChanged(), operators.tap(function () {
                    Bus.send(_this.tid, 't_dynpos');
                    _this.config.windowResizeCallback();
                }));
            };
        /**
         * @param {?} newPosition
         * @return {?}
         */
        ToppyControl.prototype.changePosition = /**
         * @param {?} newPosition
         * @return {?}
         */
            function (newPosition) {
                this.position = newPosition;
            };
        /**
         * @param {?} positionConfig
         * @return {?}
         */
        ToppyControl.prototype.updatePosition = /**
         * @param {?} positionConfig
         * @return {?}
         */
            function (positionConfig) {
                this.position.updateConfig(positionConfig);
            };
        /**
         * @param {?} content
         * @param {?=} props
         * @return {?}
         */
        ToppyControl.prototype.updateContent = /**
         * @param {?} content
         * @param {?=} props
         * @return {?}
         */
            function (content, props) {
                if (props === void 0) {
                    props = {};
                }
                this.content = getContent(content, __assign({}, this.content.props, props));
            };
        /**
         * @param {?} eventName
         * @return {?}
         */
        ToppyControl.prototype.listen = /**
         * @param {?} eventName
         * @return {?}
         */
            function (eventName) {
                return Bus.listen(this.tid, eventName);
            };
        /**
         * @private
         * @param {?} el
         * @return {?}
         */
        ToppyControl.prototype.isNotHostElement = /**
         * @private
         * @param {?} el
         * @return {?}
         */
            function (el) {
                /** @type {?} */
                var wrapperEl = this.viewEl.querySelector('.t-wrapper');
                return el !== wrapperEl && !wrapperEl.contains(el);
            };
        /**
         * @private
         * @return {?}
         */
        ToppyControl.prototype.attach = /**
         * @private
         * @return {?}
         */
            function () {
                /* create component */
                this.compFac = this.compResolver.resolveComponentFactory(ToppyComponent);
                this.compRef = this.compFac.create(this.injector);
                this.comp = this.compRef.instance;
                /* assign props */
                var _a = this, position = _a.position, content = _a.content, config = _a.config, tid = _a.tid;
                content.props.close = this.close.bind(this);
                Object.assign(this.comp, { position: position, content: content, config: config, tid: tid });
                /* attach view */
                this.hostView = this.compRef.hostView;
                this.appRef.attachView(this.hostView);
                this.viewEl = (( /** @type {?} */(this.hostView))).rootNodes[0];
                BodyEl.appendChild(this.viewEl);
            };
        /**
         * @private
         * @return {?}
         */
        ToppyControl.prototype.dettach = /**
         * @private
         * @return {?}
         */
            function () {
                if (!this.hostView)
                    return;
                this.appRef.detachView(this.hostView);
                this.compRef.destroy();
                this.hostView = this.viewEl = this.comp = null;
            };
        return ToppyControl;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var Toppy = /** @class */ (function () {
        function Toppy(injector) {
            this.injector = injector;
            this.inputs = {
                position: null,
                config: DefaultConfig,
                content: { type: "s" /* STRING */, data: 'hello', props: {} },
                tid: null
            };
            this.inputs.position = new GlobalPosition({ placement: InsidePlacement.TOP });
        }
        /**
         * @param {?} position
         * @return {?}
         */
        Toppy.prototype.position = /**
         * @param {?} position
         * @return {?}
         */
            function (position) {
                this.inputs.position = position;
                return this;
            };
        /**
         * @param {?} config
         * @return {?}
         */
        Toppy.prototype.config = /**
         * @param {?} config
         * @return {?}
         */
            function (config) {
                this.inputs.config = __assign({}, DefaultConfig, config);
                return this;
            };
        /**
         * @param {?} data
         * @param {?=} props
         * @return {?}
         */
        Toppy.prototype.content = /**
         * @param {?} data
         * @param {?=} props
         * @return {?}
         */
            function (data, props) {
                if (props === void 0) {
                    props = {};
                }
                this.inputs.content = getContent(data, props);
                return this;
            };
        /**
         * @param {?=} key
         * @return {?}
         */
        Toppy.prototype.create = /**
         * @param {?=} key
         * @return {?}
         */
            function (key) {
                if (key === void 0) {
                    key = null;
                }
                this.tid = this.inputs.tid = key || createId();
                /** @type {?} */
                var injector = i0.Injector.create([
                    {
                        provide: ToppyControl,
                        deps: [i0.ApplicationRef, i0.ComponentFactoryResolver, i0.Injector]
                    }
                ], this.injector);
                /** @type {?} */
                var tc = injector.get(ToppyControl);
                if (Toppy.controls[this.tid]) {
                    this.tid = createId();
                }
                this.inputs.position.init(this.tid);
                Toppy.controls[this.tid] = Object.assign(tc, this.inputs);
                return tc;
            };
        /**
         * @param {?} tid
         * @return {?}
         */
        Toppy.prototype.getCtrl = /**
         * @param {?} tid
         * @return {?}
         */
            function (tid) {
                return Toppy.controls[tid];
            };
        /**
         * @return {?}
         */
        Toppy.prototype.destroy = /**
         * @return {?}
         */
            function () {
                // tslint:disable-next-line:forin
                for (var key in Toppy.controls) {
                    Toppy.controls[key].close();
                }
                Toppy.controls = {};
                Bus.stop();
            };
        Toppy.controls = {};
        Toppy.decorators = [
            { type: i0.Injectable, args: [{
                        providedIn: 'root'
                    },] }
        ];
        /** @nocollapse */
        Toppy.ctorParameters = function () {
            return [
                { type: i0.Injector }
            ];
        };
        /** @nocollapse */ Toppy.ngInjectableDef = i0.defineInjectable({ factory: function Toppy_Factory() { return new Toppy(i0.inject(i0.INJECTOR)); }, token: Toppy, providedIn: "root" });
        return Toppy;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ToppyModule = /** @class */ (function () {
        function ToppyModule() {
        }
        ToppyModule.decorators = [
            { type: i0.NgModule, args: [{
                        imports: [common.CommonModule],
                        declarations: [ToppyComponent],
                        entryComponents: [ToppyComponent]
                    },] }
        ];
        return ToppyModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    exports.InsidePlacement = InsidePlacement;
    exports.OutsidePlacement = OutsidePlacement;
    exports.SlidePlacement = SlidePlacement;
    exports.FullscreenPosition = FullscreenPosition;
    exports.GlobalPosition = GlobalPosition;
    exports.RelativePosition = RelativePosition;
    exports.SlidePosition = SlidePosition;
    exports.Toppy = Toppy;
    exports.ToppyControl = ToppyControl;
    exports.ToppyModule = ToppyModule;
    exports.ɵa = ToppyComponent;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9wcHkudW1kLmpzLm1hcCIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIm5nOi8vdG9wcHkvbGliL21vZGVscy50cyIsIm5nOi8vdG9wcHkvbGliL3Bvc2l0aW9uL3Bvc2l0aW9uLnRzIiwibmc6Ly90b3BweS9saWIvcG9zaXRpb24vZnVsbHNjcmVlbi1wb3NpdGlvbi50cyIsIm5nOi8vdG9wcHkvbGliL3V0aWxzLnRzIiwibmc6Ly90b3BweS9saWIvcG9zaXRpb24vZ2xvYmFsLXBvc2l0aW9uLnRzIiwibmc6Ly90b3BweS9saWIvcG9zaXRpb24vcmVsYXRpdmUtcG9zaXRpb24udHMiLCJuZzovL3RvcHB5L2xpYi9wb3NpdGlvbi9zbGlkZS1wb3NpdGlvbi50cyIsIm5nOi8vdG9wcHkvbGliL2NvbmZpZy50cyIsIm5nOi8vdG9wcHkvbGliL3RvcHB5LmNvbXBvbmVudC50cyIsIm5nOi8vdG9wcHkvbGliL3RvcHB5LWNvbnRyb2wudHMiLCJuZzovL3RvcHB5L2xpYi90b3BweS50cyIsIm5nOi8vdG9wcHkvbGliL3RvcHB5Lm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsImltcG9ydCB7IFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBUb3BweVBvc2l0aW9uIH0gZnJvbSAnLi9wb3NpdGlvbi9wb3NpdGlvbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9zaXRpb25NZXRhIHtcbiAgdG9wPzogbnVtYmVyO1xuICBsZWZ0PzogbnVtYmVyO1xuICBib3R0b20/OiBudW1iZXI7XG4gIHJpZ2h0PzogbnVtYmVyO1xuICBoZWlnaHQ/OiBudW1iZXIgfCBzdHJpbmc7XG4gIHdpZHRoPzogbnVtYmVyIHwgc3RyaW5nO1xuICBwb3NpdGlvbj86IHN0cmluZztcbiAgZXh0cmE/OiBzdHJpbmc7XG59XG5cbmVudW0gcCB7XG4gIFRPUCA9ICd0JyxcbiAgTEVGVCA9ICdsJyxcbiAgUklHSFQgPSAncicsXG4gIEJPVFRPTSA9ICdiJyxcbiAgVE9QX0xFRlQgPSAndGwnLFxuICBUT1BfUklHSFQgPSAndHInLFxuICBCT1RUT01fTEVGVCA9ICdibCcsXG4gIEJPVFRPTV9SSUdIVCA9ICdicidcbn1cblxuZW51bSBvIHtcbiAgTEVGVF9UT1AgPSAnbHQnLFxuICBSSUdIVF9UT1AgPSAncnQnLFxuICBMRUZUX0JPVFRPTSA9ICdsYicsXG4gIFJJR0hUX0JPVFRPTSA9ICdyYidcbn1cblxuZW51bSBpIHtcbiAgQ0VOVEVSID0gJ2MnXG59XG5leHBvcnQgY29uc3QgT3V0c2lkZVBsYWNlbWVudCA9IHtcbiAgLi4ucCxcbiAgLi4ub1xufTtcbmV4cG9ydCBjb25zdCBJbnNpZGVQbGFjZW1lbnQgPSB7XG4gIC4uLnAsXG4gIC4uLmlcbn07XG5leHBvcnQgdHlwZSBPdXRzaWRlUGxhY2VtZW50ID0gcCB8IG87XG5leHBvcnQgdHlwZSBJbnNpZGVQbGFjZW1lbnQgPSBwIHwgaTtcblxuZXhwb3J0IGVudW0gU2xpZGVQbGFjZW1lbnQge1xuICBMRUZUID0gJ2wnLFxuICBSSUdIVCA9ICdyJ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRhaW5lclNpemUge1xuICB3aWR0aDogc3RyaW5nIHwgbnVtYmVyO1xuICBoZWlnaHQ6IHN0cmluZyB8IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb3BweUNvbmZpZyB7XG4gIGJhY2tkcm9wOiBib29sZWFuO1xuICBjb250YWluZXJDbGFzczogc3RyaW5nO1xuICB3cmFwcGVyQ2xhc3M6IHN0cmluZztcbiAgYmFja2Ryb3BDbGFzczogc3RyaW5nO1xuICBsaXN0ZW5XaW5kb3dFdmVudHM6IGJvb2xlYW47XG4gIGNsb3NlT25Eb2NDbGljazogYm9vbGVhbjtcbiAgYm9keUNsYXNzOiBzdHJpbmc7XG4gIGNsb3NlT25Fc2M6IGJvb2xlYW47XG4gIHdpbmRvd1Jlc2l6ZUNhbGxiYWNrOiAoKSA9PiB2b2lkO1xuICBkb2NDbGlja0NhbGxiYWNrOiAoKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFR5cGU8VD4ge1xuICBuZXcgKC4uLmFyZ3M6IGFueVtdKTogVDtcbn1cblxuZXhwb3J0IHR5cGUgVElEID0gc3RyaW5nO1xuXG5leHBvcnQgdHlwZSBUb3BweUV2ZW50TmFtZSA9ICd0X29wZW4nIHwgJ3RfY2xvc2UnIHwgJ3RfZHlucG9zJyB8ICd0X2RldGFjaCcgfCAndF9wb3N1cGRhdGUnIHwgJ3RfY29tcGlucyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9wcHlFdmVudCB7XG4gIGZyb206IFRJRDtcbiAgbmFtZTogVG9wcHlFdmVudE5hbWU7XG4gIGRhdGE/OiBhbnk7XG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIENvbnRlbnRUeXBlIHtcbiAgU1RSSU5HID0gJ3MnLFxuICBIVE1MID0gJ2gnLFxuICBURU1QTEFURSA9ICd0JyxcbiAgQ09NUE9ORU5UID0gJ2MnXG59XG5leHBvcnQgdHlwZSBDb250ZW50RGF0YSA9IHN0cmluZyB8IFRlbXBsYXRlUmVmPGFueT4gfCBDb21wb25lbnRUeXBlPGFueT47XG5leHBvcnQgdHlwZSBDb250ZW50UHJvcHMgPSB7IFt4OiBzdHJpbmddOiBhbnkgfSB8IGFueTtcblxuZXhwb3J0IGludGVyZmFjZSBDb250ZW50IHtcbiAgdHlwZT86IENvbnRlbnRUeXBlO1xuICBkYXRhOiBDb250ZW50RGF0YTtcbiAgcHJvcHM/OiBDb250ZW50UHJvcHM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5wdXRzIHtcbiAgcG9zaXRpb246IFRvcHB5UG9zaXRpb24gfCBudWxsO1xuICBjb25maWc6IFRvcHB5Q29uZmlnO1xuICBjb250ZW50OiBDb250ZW50O1xuICB0aWQ6IFRJRDtcbn1cbiIsImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBUb3BweVBvc2l0aW9uIHtcbiAgcHJvdGVjdGVkIGNvbmZpZyA9IHt9O1xuICBhYnN0cmFjdCBnZXRQb3NpdGlvbnMoaG9zdDogSFRNTEVsZW1lbnQpOiBhbnk7XG5cbiAgZ2V0Q2xhc3NOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IubmFtZS5yZXBsYWNlKCdQb3MnLCAnLXBvcycpLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICB1cGRhdGVDb25maWcoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSB7IC4uLnRoaXMuY29uZmlnLCAuLi5jb25maWcgfTtcbiAgfVxuXG4gIGluaXQodGlkOiBzdHJpbmcpIHt9XG59XG4iLCJpbXBvcnQgeyBQb3NpdGlvbk1ldGEgfSBmcm9tICcuLi9tb2RlbHMnO1xuaW1wb3J0IHsgVG9wcHlQb3NpdGlvbiB9IGZyb20gJy4vcG9zaXRpb24nO1xuXG5leHBvcnQgY2xhc3MgRnVsbHNjcmVlblBvc2l0aW9uIGV4dGVuZHMgVG9wcHlQb3NpdGlvbiB7XG4gIGdldFBvc2l0aW9ucygpOiBQb3NpdGlvbk1ldGEge1xuICAgIHJldHVybiB7IHRvcDogMCwgbGVmdDogMCwgd2lkdGg6ICcxMDAlJywgaGVpZ2h0OiAnMTAwJScsIHBvc2l0aW9uOiAnZml4ZWQnIH07XG4gIH1cbn1cbiIsImltcG9ydCB7IFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBmaWx0ZXIsIG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IENvbnRlbnQsIENvbnRlbnREYXRhLCBDb250ZW50UHJvcHMsIENvbnRlbnRUeXBlLCBUb3BweUV2ZW50LCBUb3BweUV2ZW50TmFtZSB9IGZyb20gJy4vbW9kZWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRlbnQoZGF0YTogQ29udGVudERhdGEsIHByb3BzOiBDb250ZW50UHJvcHMgPSB7fSk6IENvbnRlbnQge1xuICBsZXQgdHlwZTogQ29udGVudFR5cGUgPSBDb250ZW50VHlwZS5DT01QT05FTlQ7XG5cbiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyAmJiBwcm9wc1snaGFzSFRNTCddKSB0eXBlID0gQ29udGVudFR5cGUuSFRNTDtcbiAgZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB0eXBlID0gQ29udGVudFR5cGUuU1RSSU5HO1xuICBlbHNlIGlmIChkYXRhIGluc3RhbmNlb2YgVGVtcGxhdGVSZWYpIHR5cGUgPSBDb250ZW50VHlwZS5URU1QTEFURTtcblxuICByZXR1cm4geyBkYXRhLCB0eXBlLCBwcm9wcyB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSWQoKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpXG4gICAgLnRvU3RyaW5nKDM2KVxuICAgIC5zdWJzdHIoMiwgNSk7XG59XG5cbi8qIGh0bWwgZG9tIHV0aWxzICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjc3NDbGFzcyhtZXRob2Q6ICdhZGQnIHwgJ3JlbW92ZScsIGNsczogc3RyaW5nW10sIHRhcmdldDogc3RyaW5nID0gJ2JvZHknKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KS5jbGFzc0xpc3RbbWV0aG9kXSguLi5jbHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9Dc3Moc3R5bGVPYmopIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHN0eWxlT2JqKVxuICAgIC5tYXAoeCA9PiBgJHt4fToke3N0eWxlT2JqW3hdfSR7dHlwZW9mIHN0eWxlT2JqW3hdID09PSAnbnVtYmVyJyA/ICdweCcgOiAnJ31gKVxuICAgIC5qb2luKCc7Jyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwZXJjZW50VG9Dc3MobWF4LCBwZXJjZW50YWdlOiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgbnVtYmVyID0gTnVtYmVyKHBlcmNlbnRhZ2Uuc2xpY2UoMCwgLTEpKTtcbiAgaWYgKG51bWJlciA+IDEwMCkge1xuICAgIG51bWJlciA9IDEwMDtcbiAgfVxuICByZXR1cm4gYGNhbGMoJHttYXh9cHggLSAkezEwMCAtIG51bWJlcn0lKWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRXSChzcmMsIGhvc3QsIGtleSwgdmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICBob3N0W2tleV0gPSB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmVuZHNXaXRoKCclJykpIHtcbiAgICB2YWx1ZSA9IHBlcmNlbnRUb0NzcyhzcmNba2V5XSwgdmFsdWUpO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgY29uc3QgQm9keUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuXG4vKiBldmVudHMgKi9cblxuY2xhc3MgQnVzQ2xhc3Mge1xuICBwcml2YXRlIF9lOiBTdWJqZWN0PFRvcHB5RXZlbnQ+ID0gbmV3IFN1YmplY3QoKTtcbiAgc2VuZChmcm9tOiBzdHJpbmcsIG5hbWU6IFRvcHB5RXZlbnROYW1lLCBkYXRhOiBhbnkgPSBudWxsKTogdm9pZCB7XG4gICAgdGhpcy5fZS5uZXh0KHsgZnJvbSwgbmFtZSwgZGF0YSB9KTtcbiAgfVxuICBsaXN0ZW4oZnJvbTogc3RyaW5nLCBuYW1lOiBUb3BweUV2ZW50TmFtZSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuX2UuYXNPYnNlcnZhYmxlKCkucGlwZShcbiAgICAgIGZpbHRlcihlID0+IGUuZnJvbSA9PT0gZnJvbSAmJiBlLm5hbWUgPT09IG5hbWUpLFxuICAgICAgbWFwKGUgPT4gZS5kYXRhKVxuICAgICk7XG4gIH1cblxuICBzdG9wKCk6IHZvaWQge1xuICAgIHRoaXMuX2UuY29tcGxldGUoKTtcbiAgfVxufVxuZXhwb3J0IGNvbnN0IEJ1cyA9IG5ldyBCdXNDbGFzcygpO1xuIiwiaW1wb3J0IHsgSW5zaWRlUGxhY2VtZW50IH0gZnJvbSAnLi4vbW9kZWxzJztcbmltcG9ydCB7IHNldFdIIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHsgVG9wcHlQb3NpdGlvbiB9IGZyb20gJy4vcG9zaXRpb24nO1xuXG5pbnRlcmZhY2UgR2xvYmFsUG9zaXRpb25Db25maWcge1xuICBwbGFjZW1lbnQ/OiBJbnNpZGVQbGFjZW1lbnQ7XG4gIG9mZnNldD86IG51bWJlcjtcbiAgd2lkdGg/OiBzdHJpbmcgfCBudW1iZXI7XG4gIGhlaWdodD86IHN0cmluZyB8IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIEdsb2JhbFBvc2l0aW9uIGV4dGVuZHMgVG9wcHlQb3NpdGlvbiB7XG4gIHByb3RlY3RlZCBjb25maWc6IEdsb2JhbFBvc2l0aW9uQ29uZmlnID0geyBwbGFjZW1lbnQ6IEluc2lkZVBsYWNlbWVudC5DRU5URVIsIHdpZHRoOiAxMDAsIGhlaWdodDogMTAwLCBvZmZzZXQ6IDAgfTtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IEdsb2JhbFBvc2l0aW9uQ29uZmlnKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnVwZGF0ZUNvbmZpZyhjb25maWcpO1xuICB9XG4gIGdldFBvc2l0aW9ucyhob3N0RWw/OiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGhvc3QgPSBob3N0RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgYXMgYW55O1xuICAgIGNvbnN0IHNyYyA9IHtcbiAgICAgIHdpZHRoOiB3aW5kb3dbJ2lubmVyV2lkdGgnXSxcbiAgICAgIGhlaWdodDogd2luZG93Wydpbm5lckhlaWdodCddXG4gICAgfTtcbiAgICBsZXQgeyB3aWR0aDogdywgaGVpZ2h0OiBoIH0gPSB0aGlzLmNvbmZpZztcblxuICAgIHcgPSBzZXRXSChzcmMsIGhvc3QsICd3aWR0aCcsIHcpO1xuICAgIGggPSBzZXRXSChzcmMsIGhvc3QsICdoZWlnaHQnLCBoKTtcblxuICAgIGNvbnN0IHByb3BzID0gdGhpcy5jYWxjKHRoaXMuY29uZmlnLnBsYWNlbWVudCwgc3JjLCBob3N0KTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4ucHJvcHMsXG4gICAgICB3aWR0aDogdyxcbiAgICAgIGhlaWdodDogaCxcbiAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgZXh0cmE6IHRoaXMuY29uZmlnLnBsYWNlbWVudFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGNhbGMocGxhY2VtZW50OiBJbnNpZGVQbGFjZW1lbnQsIHNyYywgaG9zdCkge1xuICAgIGNvbnN0IFttYWluLCBzdWJdID0gcGxhY2VtZW50LnNwbGl0KCcnKTtcbiAgICBjb25zdCBwOiBhbnkgPSB7fTtcblxuICAgIGlmIChtYWluID09PSAndCcpIHtcbiAgICAgIHAudG9wID0gdGhpcy5jb25maWcub2Zmc2V0O1xuICAgIH1cbiAgICBpZiAobWFpbiA9PT0gJ2InKSB7XG4gICAgICBwLmJvdHRvbSA9IHRoaXMuY29uZmlnLm9mZnNldDtcbiAgICB9XG4gICAgaWYgKChtYWluID09PSAnbCcgfHwgbWFpbiA9PT0gJ3InIHx8IG1haW4gPT09ICdjJykgJiYgIXN1Yikge1xuICAgICAgcC50b3AgPSAoc3JjLmhlaWdodCAtIGhvc3QuaGVpZ2h0KSAvIDI7XG4gICAgfVxuXG4gICAgaWYgKChtYWluID09PSAndCcgfHwgbWFpbiA9PT0gJ2InIHx8IG1haW4gPT09ICdjJykgJiYgIXN1Yikge1xuICAgICAgcC5sZWZ0ID0gKHNyYy53aWR0aCAtIGhvc3Qud2lkdGgpIC8gMjtcbiAgICB9XG4gICAgaWYgKChtYWluID09PSAnbCcgJiYgIXN1YikgfHwgc3ViID09PSAnbCcpIHtcbiAgICAgIHAubGVmdCA9IHRoaXMuY29uZmlnLm9mZnNldDtcbiAgICB9XG4gICAgaWYgKChtYWluID09PSAncicgJiYgIXN1YikgfHwgc3ViID09PSAncicpIHtcbiAgICAgIHAucmlnaHQgPSB0aGlzLmNvbmZpZy5vZmZzZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHA7XG4gIH1cbn1cbiIsImltcG9ydCB7IE91dHNpZGVQbGFjZW1lbnQsIFBvc2l0aW9uTWV0YSB9IGZyb20gJy4uL21vZGVscyc7XG5pbXBvcnQgeyBCdXMsIHNldFdIIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHsgVG9wcHlQb3NpdGlvbiB9IGZyb20gJy4vcG9zaXRpb24nO1xuXG5pbnRlcmZhY2UgUmVsYXRpdmVQb3NpdGlvbkNvbmZpZyB7XG4gIHNyYzogSFRNTEVsZW1lbnQ7XG4gIHBsYWNlbWVudD86IE91dHNpZGVQbGFjZW1lbnQ7XG4gIGF1dG9VcGRhdGU/OiBib29sZWFuO1xuICB3aWR0aD86IHN0cmluZyB8IG51bWJlcjtcbiAgaGVpZ2h0Pzogc3RyaW5nIHwgbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgUmVsYXRpdmVQb3NpdGlvbiBleHRlbmRzIFRvcHB5UG9zaXRpb24ge1xuICBwcm90ZWN0ZWQgY29uZmlnOiBSZWxhdGl2ZVBvc2l0aW9uQ29uZmlnID0ge1xuICAgIHNyYzogbnVsbCxcbiAgICBwbGFjZW1lbnQ6IE91dHNpZGVQbGFjZW1lbnQuVE9QLFxuICAgIGF1dG9VcGRhdGU6IGZhbHNlLFxuICAgIHdpZHRoOiAnYXV0bycsXG4gICAgaGVpZ2h0OiAnYXV0bydcbiAgfTtcbiAgb2JzOiBNdXRhdGlvbk9ic2VydmVyO1xuICBjb25zdHJ1Y3Rvcihjb25maWc6IFJlbGF0aXZlUG9zaXRpb25Db25maWcpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudXBkYXRlQ29uZmlnKGNvbmZpZyk7XG4gIH1cbiAgaW5pdCh0aWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvbmZpZy5hdXRvVXBkYXRlKSB0aGlzLmxpc3RlbkRyYWcodGlkKTtcbiAgfVxuXG4gIGdldFBvc2l0aW9ucyh0YXJnZXRFbDogSFRNTEVsZW1lbnQpOiBQaWNrPFBvc2l0aW9uTWV0YSwgYW55PiB7XG4gICAgY29uc3QgcyA9IHRoaXMuZ2V0Q29vcmRzKHRoaXMuY29uZmlnLnNyYyk7XG4gICAgY29uc3QgaCA9IHRoaXMuZ2V0Q29vcmRzKHRhcmdldEVsKTtcbiAgICBsZXQgeyB3aWR0aDogdywgaGVpZ2h0OiBodCB9ID0gdGhpcy5jb25maWc7XG5cbiAgICB3ID0gc2V0V0gocywgaCwgJ3dpZHRoJywgdyk7XG4gICAgaHQgPSBzZXRXSChzLCBoLCAnaGVpZ2h0JywgaHQpO1xuXG4gICAgY29uc3QgeyBwb3MsIHByb3BzIH0gPSB0aGlzLmNhbGN1bGF0ZVBvcyh0aGlzLmNvbmZpZy5wbGFjZW1lbnQsIHMsIGgpO1xuICAgIHJldHVybiB7IC4uLnRoaXMucm91bmQocHJvcHMpLCB3aWR0aDogdywgaGVpZ2h0OiBodCwgZXh0cmE6IHBvcyB9O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRDb29yZHMoZWxlbTogSFRNTEVsZW1lbnQpOiBQb3NpdGlvbk1ldGEge1xuICAgIHJldHVybiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjKHBsYWNlbWVudDogT3V0c2lkZVBsYWNlbWVudCwgc3JjLCBob3N0KTogb2JqZWN0IHtcbiAgICBjb25zdCBbbWFpbiwgc3ViXSA9IHBsYWNlbWVudC5zcGxpdCgnJyk7XG4gICAgY29uc3QgcCA9IHsgbGVmdDogMCwgdG9wOiAwIH07XG4gICAgaWYgKChtYWluID09PSAndCcgfHwgbWFpbiA9PT0gJ2InKSAmJiAhc3ViKSB7XG4gICAgICBwLmxlZnQgPSBzcmMubGVmdCArIChzcmMud2lkdGggLSBob3N0LndpZHRoKSAvIDI7XG4gICAgfVxuXG4gICAgaWYgKChtYWluID09PSAndCcgfHwgbWFpbiA9PT0gJ2InKSAmJiBzdWIpIHtcbiAgICAgIHAubGVmdCA9IHNyYy5sZWZ0O1xuICAgIH1cbiAgICBpZiAoKG1haW4gPT09ICd0JyB8fCBtYWluID09PSAnYicpICYmIHN1YiA9PT0gJ3InKSB7XG4gICAgICBwLmxlZnQgPSBzcmMubGVmdCArIHNyYy53aWR0aCAtIGhvc3Qud2lkdGg7XG4gICAgfVxuICAgIGlmIChtYWluID09PSAnbCcpIHtcbiAgICAgIHAubGVmdCA9IHNyYy5sZWZ0IC0gaG9zdC53aWR0aDtcbiAgICB9XG4gICAgaWYgKG1haW4gPT09ICdyJykge1xuICAgICAgcC5sZWZ0ID0gc3JjLnJpZ2h0O1xuICAgIH1cblxuICAgIGlmIChtYWluID09PSAndCcpIHtcbiAgICAgIHAudG9wID0gc3JjLnRvcCAtIGhvc3QuaGVpZ2h0O1xuICAgIH1cbiAgICBpZiAobWFpbiA9PT0gJ2InKSB7XG4gICAgICBwLnRvcCA9IHNyYy50b3AgKyBzcmMuaGVpZ2h0O1xuICAgIH1cbiAgICBpZiAobWFpbiA9PT0gJ2wnIHx8IG1haW4gPT09ICdyJykge1xuICAgICAgcC50b3AgPSBzcmMudG9wICsgKHNyYy5oZWlnaHQgLSBob3N0LmhlaWdodCkgLyAyO1xuICAgIH1cbiAgICBpZiAoc3ViID09PSAndCcgJiYgKG1haW4gPT09ICdsJyB8fCBtYWluID09PSAncicpKSB7XG4gICAgICBwLnRvcCA9IHNyYy50b3A7XG4gICAgfVxuICAgIGlmIChzdWIgPT09ICdiJyAmJiAobWFpbiA9PT0gJ2wnIHx8IG1haW4gPT09ICdyJykpIHtcbiAgICAgIHAudG9wID0gc3JjLnRvcCArIHNyYy5oZWlnaHQgLSBob3N0LmhlaWdodDtcbiAgICB9XG4gICAgcmV0dXJuIHA7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVBvcyhwb3MsIHMsIGgsIGMgPSB0cnVlKTogeyBbeDogc3RyaW5nXTogYW55IH0ge1xuICAgIGNvbnN0IHByb3BzID0gdGhpcy5jYWxjKHBvcywgcywgaCk7XG5cbiAgICBpZiAoYyAmJiB0aGlzLmNvbmZpZy5hdXRvVXBkYXRlICYmIHRoaXMuaXNPdmVyZmxvd2VkKHsgLi4ucHJvcHMsIHdpZHRoOiBoLndpZHRoLCBoZWlnaHQ6IGguaGVpZ2h0IH0pKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVQb3ModGhpcy5uZXh0UG9zaXRpb24ocG9zKSwgcywgaCwgZmFsc2UpO1xuICAgIH1cblxuICAgIHJldHVybiB7IHBvcywgcHJvcHMgfTtcbiAgfVxuXG4gIHByaXZhdGUgaXNPdmVyZmxvd2VkKHByb3BzOiB7IFt4OiBzdHJpbmddOiBhbnkgfSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgaW5uZXJIZWlnaHQsIGlubmVyV2lkdGggfSA9IHdpbmRvdztcbiAgICBwcm9wcy5ib3R0b20gPSBwcm9wcy50b3AgKyBwcm9wcy5oZWlnaHQ7XG4gICAgcHJvcHMucmlnaHQgPSBwcm9wcy5sZWZ0ICsgcHJvcHMud2lkdGg7XG4gICAgcmV0dXJuIHByb3BzLmJvdHRvbSA+IGlubmVySGVpZ2h0IHx8IHByb3BzLnRvcCA8PSAwIHx8IHByb3BzLmxlZnQgPD0gMCB8fCBwcm9wcy5yaWdodCA+IGlubmVyV2lkdGg7XG4gIH1cblxuICBwcml2YXRlIG5leHRQb3NpdGlvbihjdXJyZW50OiBPdXRzaWRlUGxhY2VtZW50KTogc3RyaW5nIHtcbiAgICBjb25zdCBwbGFjZW1lbnRzID0gWyd0JywgJ2InLCAnbCcsICdyJywgJ3RsJywgJ2JsJywgJ3RyJywgJ2JyJywgJ2x0JywgJ3J0JywgJ2xiJywgJ3JiJ107XG5cbiAgICBjb25zdCBpbmRleCA9IHBsYWNlbWVudHMuaW5kZXhPZihjdXJyZW50KTtcbiAgICBjb25zdCBldmVuID0gaW5kZXggJSAyID09PSAwO1xuICAgIHJldHVybiBldmVuID8gcGxhY2VtZW50c1tpbmRleCArIDFdIDogcGxhY2VtZW50c1tpbmRleCAtIDFdO1xuICB9XG5cbiAgcHJpdmF0ZSByb3VuZChwcm9wczogb2JqZWN0KTogb2JqZWN0IHtcbiAgICBPYmplY3Qua2V5cyhwcm9wcykuZm9yRWFjaCh4ID0+IChwcm9wc1t4XSA9IE1hdGgucm91bmQocHJvcHNbeF0pKSk7XG4gICAgcmV0dXJuIHByb3BzO1xuICB9XG5cbiAgcHJpdmF0ZSBsaXN0ZW5EcmFnKHRpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub2JzKSB0aGlzLm9icy5kaXNjb25uZWN0KCk7XG4gICAgdGhpcy5vYnMgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihtdXRhdGlvbnNMaXN0ID0+IHtcbiAgICAgIGZvciAoY29uc3QgbXV0YXRpb24gb2YgbXV0YXRpb25zTGlzdCkge1xuICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2F0dHJpYnV0ZXMnKSBCdXMuc2VuZCh0aWQsICd0X2R5bnBvcycpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5vYnMub2JzZXJ2ZSh0aGlzLmNvbmZpZy5zcmMsIHtcbiAgICAgIGF0dHJpYnV0ZUZpbHRlcjogWydzdHlsZSddXG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFBvc2l0aW9uTWV0YSwgU2xpZGVQbGFjZW1lbnQgfSBmcm9tICcuLi9tb2RlbHMnO1xuaW1wb3J0IHsgVG9wcHlQb3NpdGlvbiB9IGZyb20gJy4vcG9zaXRpb24nO1xuXG5pbnRlcmZhY2UgU2xpZGVQbGFjZW1lbnRDb25maWcge1xuICBwbGFjZW1lbnQ/OiBTbGlkZVBsYWNlbWVudDtcbiAgd2lkdGg/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBTbGlkZVBvc2l0aW9uIGV4dGVuZHMgVG9wcHlQb3NpdGlvbiB7XG4gIHByb3RlY3RlZCBjb25maWc6IFNsaWRlUGxhY2VtZW50Q29uZmlnID0geyBwbGFjZW1lbnQ6IFNsaWRlUGxhY2VtZW50LkxFRlQsIHdpZHRoOiAnMzAlJyB9O1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogU2xpZGVQbGFjZW1lbnRDb25maWcpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuY29uZmlnID0geyAuLi50aGlzLmNvbmZpZywgLi4uY29uZmlnIH07XG4gIH1cbiAgZ2V0UG9zaXRpb25zKCk6IFBvc2l0aW9uTWV0YSB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLmNvbmZpZy5wbGFjZW1lbnQgPT09IFNsaWRlUGxhY2VtZW50LkxFRlQgPyB7IGxlZnQ6IDAgfSA6IHsgcmlnaHQ6IDAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4ucHJvcHMsXG4gICAgICB0b3A6IDAsXG4gICAgICB3aWR0aDogdGhpcy5jb25maWcud2lkdGgsXG4gICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgZXh0cmE6IHRoaXMuY29uZmlnLnBsYWNlbWVudFxuICAgIH07XG4gIH1cbn1cbiIsImltcG9ydCB7IFRvcHB5Q29uZmlnIH0gZnJvbSAnLi9tb2RlbHMnO1xuXG5leHBvcnQgY29uc3QgRGVmYXVsdENvbmZpZzogVG9wcHlDb25maWcgPSB7XG4gIGNvbnRhaW5lckNsYXNzOiAndC1vdmVybGF5JyxcbiAgYm9keUNsYXNzOiAndC1vcGVuJyxcbiAgd3JhcHBlckNsYXNzOiAnJyxcbiAgYmFja2Ryb3BDbGFzczogJycsXG4gIGJhY2tkcm9wOiBmYWxzZSxcbiAgY2xvc2VPbkRvY0NsaWNrOiBmYWxzZSxcbiAgbGlzdGVuV2luZG93RXZlbnRzOiB0cnVlLFxuICBjbG9zZU9uRXNjOiBmYWxzZSxcbiAgd2luZG93UmVzaXplQ2FsbGJhY2s6ICgpID0+IHt9LFxuICBkb2NDbGlja0NhbGxiYWNrOiAoKSA9PiB7fVxufTtcbiIsImltcG9ydCB7XG4gIEFmdGVyVmlld0luaXQsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ29tcG9uZW50LFxuICBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG4gIEVsZW1lbnRSZWYsXG4gIEluamVjdG9yLFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgVmlld0NoaWxkLFxuICBWaWV3Q29udGFpbmVyUmVmXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgc3RhcnRXaXRoLCB0YWtlVW50aWwsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IENvbnRlbnQsIENvbnRlbnRUeXBlLCBUSUQsIFRvcHB5Q29uZmlnIH0gZnJvbSAnLi9tb2RlbHMnO1xuaW1wb3J0IHsgVG9wcHlQb3NpdGlvbiB9IGZyb20gJy4vcG9zaXRpb24vcG9zaXRpb24nO1xuaW1wb3J0IHsgQnVzLCBjc3NDbGFzcywgdG9Dc3MgfSBmcm9tICcuL3V0aWxzJztcblxuQENvbXBvbmVudCh7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjb21wb25lbnQtc2VsZWN0b3JcbiAgc2VsZWN0b3I6ICd0b3BweScsXG4gIHRlbXBsYXRlVXJsOiAnLi90ZW1wbGF0ZS5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vc3R5bGVzLnNjc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5leHBvcnQgY2xhc3MgVG9wcHlDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XG4gIEBWaWV3Q2hpbGQoJ2NvbXBPdXRsZXQnLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYgfSkgY29tcE91dGxldDogVmlld0NvbnRhaW5lclJlZjtcbiAgY29udGVudDogQ29udGVudCA9IHtcbiAgICB0eXBlOiBDb250ZW50VHlwZS5TVFJJTkcsXG4gICAgZGF0YTogJycsXG4gICAgcHJvcHM6IHt9XG4gIH07XG4gIGNvbmZpZzogVG9wcHlDb25maWc7XG4gIHBvc2l0aW9uOiBUb3BweVBvc2l0aW9uO1xuICB0aWQ6IFRJRDtcbiAgZWw6IEhUTUxFbGVtZW50IHwgYW55O1xuICB3cmFwcGVyRWw6IEhUTUxFbGVtZW50IHwgYW55O1xuICBleHRyYTogc3RyaW5nO1xuICBwaW5qOiBhbnk7XG4gIGNvbXBJbnN0YW5jZTtcbiAgcHJpdmF0ZSBkaWU6IFN1YmplY3Q8MT4gPSBuZXcgU3ViamVjdCgpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBpbmo6IEluamVjdG9yLFxuICAgIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIHByaXZhdGUgY29tcFJlc29sdmVyOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG4gICAgcHJpdmF0ZSBlbFJlZjogRWxlbWVudFJlZlxuICApIHtcbiAgICB0aGlzLnBpbmogPSBJbmplY3RvcjtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuZWwgPSB0aGlzLmVsUmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgdGhpcy53cmFwcGVyRWwgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoJy50LXdyYXBwZXInKTtcbiAgICBsZXQgY2xzID0gWyd0LWNvbnRhaW5lcicsIHRoaXMuY29uZmlnLmNvbnRhaW5lckNsYXNzLCB0aGlzLnBvc2l0aW9uLmdldENsYXNzTmFtZSgpXTtcbiAgICBpZiAodGhpcy5jb25maWcuY2xvc2VPbkRvY0NsaWNrKSB7XG4gICAgICBjbHMgPSBjbHMuY29uY2F0KFsnbm8tcG9pbnRlcnMnXSk7XG4gICAgfVxuICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCdkYXRhLXRpZCcsIHRoaXMudGlkKTtcbiAgICBjc3NDbGFzcygnYWRkJywgY2xzLCBgW2RhdGEtdGlkPScke1t0aGlzLnRpZF19J11gKTtcbiAgICBjc3NDbGFzcygnYWRkJywgW3RoaXMuY29uZmlnLmJvZHlDbGFzc10pO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIHRoaXMubGlzdGVuUG9zKCkuc3Vic2NyaWJlKCk7XG4gICAgaWYgKHRoaXMuY29udGVudC50eXBlID09PSBDb250ZW50VHlwZS5DT01QT05FTlQpIHtcbiAgICAgIHRoaXMuY29tcEluc3RhbmNlID0gdGhpcy5zZXRDb21wb25lbnQodGhpcy5jb250ZW50LnByb3BzKTtcbiAgICAgIEJ1cy5zZW5kKHRoaXMudGlkLCAndF9jb21waW5zJywgdGhpcy5jb21wSW5zdGFuY2UpO1xuICAgIH1cbiAgfVxuXG4gIHNldENvbXBvbmVudChwcm9wcykge1xuICAgIGNvbnN0IGNvbXBSZWYgPSB0aGlzLmNvbXBPdXRsZXQuY3JlYXRlQ29tcG9uZW50KFxuICAgICAgdGhpcy5jb21wUmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkodGhpcy5jb250ZW50LmRhdGEgYXMgYW55KVxuICAgICk7XG4gICAgT2JqZWN0LmFzc2lnbihjb21wUmVmLmluc3RhbmNlLCBwcm9wcyk7XG4gICAgY29tcFJlZi5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgcmV0dXJuIGNvbXBSZWYuaW5zdGFuY2U7XG4gIH1cblxuICB1cGRhdGVUZXh0Q29udGVudChkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jb250ZW50LnR5cGUgPT09IENvbnRlbnRUeXBlLlNUUklORykge1xuICAgICAgdGhpcy5jb250ZW50LmRhdGEgPSBkYXRhO1xuICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgY3NzQ2xhc3MoJ3JlbW92ZScsIFt0aGlzLmNvbmZpZy5ib2R5Q2xhc3NdKTtcbiAgICB0aGlzLmRpZS5uZXh0KDEpO1xuICAgIEJ1cy5zZW5kKHRoaXMudGlkLCAndF9kZXRhY2gnKTtcbiAgfVxuXG4gIHByaXZhdGUgbGlzdGVuUG9zKCk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuIEJ1cy5saXN0ZW4odGhpcy50aWQsICd0X2R5bnBvcycpLnBpcGUoXG4gICAgICBzdGFydFdpdGgoMSksXG4gICAgICB0YWtlVW50aWwodGhpcy5kaWUpLFxuICAgICAgdGFwKGUgPT4ge1xuICAgICAgICBpZiAoIWUgfHwgIWUueCkgcmV0dXJuIHRoaXMuc2V0UG9zKCk7XG4gICAgICAgIGNvbnN0IGNvb3JkcyA9IHsgbGVmdDogZS54LCB0b3A6IGUueSB9O1xuICAgICAgICB0aGlzLndyYXBwZXJFbC5zdHlsZSA9IHRvQ3NzKGNvb3Jkcyk7XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHNldFBvcygpOiB2b2lkIHtcbiAgICBjb25zdCB7IGV4dHJhLCAuLi5jb29yZHMgfSA9IHRoaXMucG9zaXRpb24uZ2V0UG9zaXRpb25zKHRoaXMud3JhcHBlckVsKTtcbiAgICBpZiAodGhpcy5leHRyYSAhPT0gZXh0cmEpIHtcbiAgICAgIHRoaXMuZXh0cmEgPSBleHRyYTtcbiAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKGNvb3JkcywgeyB2aXNpYmlsaXR5OiAndmlzaWJsZScsIG9wYWNpdHk6ICcxJyB9KTtcbiAgICB0aGlzLndyYXBwZXJFbC5zdHlsZSA9IHRvQ3NzKGNvb3Jkcyk7XG4gICAgQnVzLnNlbmQodGhpcy50aWQsICd0X3Bvc3VwZGF0ZScpO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBBcHBsaWNhdGlvblJlZixcbiAgQ29tcG9uZW50RmFjdG9yeSxcbiAgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxuICBDb21wb25lbnRSZWYsXG4gIEluamVjdG9yLFxuICBWaWV3UmVmXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgYW5pbWF0aW9uRnJhbWVTY2hlZHVsZXIsIGZyb21FdmVudCwgbWVyZ2UgYXMgbWVyZ2VPYnMsIE9ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGRlYm91bmNlVGltZSwgZGlzdGluY3RVbnRpbENoYW5nZWQsIGZpbHRlciwgbWFwLCBvYnNlcnZlT24sIHNraXBXaGlsZSwgdGFrZVVudGlsLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBDb250ZW50LCBDb250ZW50RGF0YSwgQ29udGVudFByb3BzLCBUSUQsIFRvcHB5Q29uZmlnLCBUb3BweUV2ZW50TmFtZSB9IGZyb20gJy4vbW9kZWxzJztcbmltcG9ydCB7IFRvcHB5UG9zaXRpb24gfSBmcm9tICcuL3Bvc2l0aW9uL3Bvc2l0aW9uJztcbmltcG9ydCB7IFRvcHB5Q29tcG9uZW50IH0gZnJvbSAnLi90b3BweS5jb21wb25lbnQnO1xuaW1wb3J0IHsgQm9keUVsLCBCdXMsIGdldENvbnRlbnQgfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGNsYXNzIFRvcHB5Q29udHJvbCB7XG4gIHBvc2l0aW9uOiBUb3BweVBvc2l0aW9uO1xuICBjb25maWc6IFRvcHB5Q29uZmlnO1xuICBjb250ZW50OiBDb250ZW50O1xuICB0aWQ6IFRJRDtcbiAgY29tcDogVG9wcHlDb21wb25lbnQ7XG4gIHVwZGF0ZVRleHRDb250ZW50OiBTdWJqZWN0PHN0cmluZz4gPSBuZXcgU3ViamVjdCgpO1xuICBob3N0VmlldzogVmlld1JlZjtcbiAgY29tcFJlZjogQ29tcG9uZW50UmVmPFRvcHB5Q29tcG9uZW50PjtcblxuICBwcml2YXRlIHZpZXdFbDogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgaXNPcGVuID0gZmFsc2U7XG4gIHByaXZhdGUgY29tcEZhYzogQ29tcG9uZW50RmFjdG9yeTxUb3BweUNvbXBvbmVudD47XG4gIHByaXZhdGUgZGllOiBTdWJqZWN0PDE+ID0gbmV3IFN1YmplY3QoKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGFwcFJlZjogQXBwbGljYXRpb25SZWYsXG4gICAgcHJpdmF0ZSBjb21wUmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvclxuICApIHtcbiAgICB0aGlzLnVwZGF0ZVRleHRDb250ZW50LnN1YnNjcmliZShjb250ZW50ID0+IHtcbiAgICAgIGlmICh0aGlzLmlzT3BlbikgdGhpcy5jb21wLnVwZGF0ZVRleHRDb250ZW50KGNvbnRlbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgb3BlbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc09wZW4pIHJldHVybjtcblxuICAgIHRoaXMuYXR0YWNoKCk7XG4gICAgaWYgKHRoaXMudmlld0VsKSB7XG4gICAgICBtZXJnZU9icyh0aGlzLm9uRG9jdW1lbnRDbGljaygpLCB0aGlzLm9uV2luZG93UmVzaXplKCksIHRoaXMub25Fc2NDbGljaygpKS5zdWJzY3JpYmUoKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gQnVzLnNlbmQodGhpcy50aWQsICd0X2R5bnBvcycpLCAxKTtcbiAgICB9XG5cbiAgICBCdXMuc2VuZCh0aGlzLnRpZCwgJ3Rfb3BlbicpO1xuICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgfVxuXG4gIGNsb3NlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc09wZW4pIHJldHVybjtcblxuICAgIHRoaXMuZGV0dGFjaCgpO1xuICAgIHRoaXMuZGllLm5leHQoMSk7XG4gICAgQnVzLnNlbmQodGhpcy50aWQsICd0X2Nsb3NlJyk7XG4gICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgfVxuXG4gIHRvZ2dsZSgpOiB2b2lkIHtcbiAgICByZXR1cm4gdGhpcy5pc09wZW4gPyB0aGlzLmNsb3NlKCkgOiB0aGlzLm9wZW4oKTtcbiAgfVxuXG4gIG9uRXNjQ2xpY2soKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gZnJvbUV2ZW50KEJvZHlFbCwgJ2tleWRvd24nKS5waXBlKFxuICAgICAgdGFrZVVudGlsKHRoaXMuZGllKSxcbiAgICAgIHNraXBXaGlsZSgoKSA9PiAhdGhpcy5jb25maWcuY2xvc2VPbkVzYyksXG4gICAgICBmaWx0ZXIoKGU6IGFueSkgPT4gKGUua2V5ID09PSAnRXNjYXBlJyB8fCBlLmtleSA9PT0gJ0VzYycgfHwgZS5rZXlDb2RlID09PSAyNykgJiYgZS50YXJnZXQubm9kZU5hbWUgPT09ICdCT0RZJyksXG4gICAgICB0YXAoZSA9PiBlLnByZXZlbnREZWZhdWx0KCkpLFxuICAgICAgbWFwKGUgPT4gZS50YXJnZXQpLFxuICAgICAgdGFwKCgpID0+IHRoaXMuY2xvc2UoKSlcbiAgICApO1xuICB9XG5cbiAgb25Eb2N1bWVudENsaWNrKCk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuIGZyb21FdmVudCh0aGlzLnZpZXdFbCwgJ2NsaWNrJykucGlwZShcbiAgICAgIHRha2VVbnRpbCh0aGlzLmRpZSksXG4gICAgICBtYXAoKGU6IGFueSkgPT4gZS50YXJnZXQpLFxuICAgICAgc2tpcFdoaWxlKCgpID0+ICF0aGlzLmNvbmZpZy5jbG9zZU9uRG9jQ2xpY2spLFxuICAgICAgZmlsdGVyKHRoaXMuaXNOb3RIb3N0RWxlbWVudC5iaW5kKHRoaXMpKSxcbiAgICAgIHRhcCgoKSA9PiB7XG4gICAgICAgIHRoaXMuY29uZmlnLmRvY0NsaWNrQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgb25XaW5kb3dSZXNpemUoKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICBjb25zdCBvblJlc2l6ZSA9IGZyb21FdmVudCh3aW5kb3csICdyZXNpemUnKTtcbiAgICBjb25zdCBvblNjcm9sbCA9IGZyb21FdmVudCh3aW5kb3csICdzY3JvbGwnLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgcmV0dXJuIG1lcmdlT2JzKG9uUmVzaXplLCBvblNjcm9sbCkucGlwZShcbiAgICAgIHNraXBXaGlsZSgoKSA9PiAhdGhpcy5jb25maWcubGlzdGVuV2luZG93RXZlbnRzKSxcbiAgICAgIHRha2VVbnRpbCh0aGlzLmRpZSksXG4gICAgICBkZWJvdW5jZVRpbWUoNSksXG4gICAgICBvYnNlcnZlT24oYW5pbWF0aW9uRnJhbWVTY2hlZHVsZXIpLFxuICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcbiAgICAgIHRhcCgoKSA9PiB7XG4gICAgICAgIEJ1cy5zZW5kKHRoaXMudGlkLCAndF9keW5wb3MnKTtcbiAgICAgICAgdGhpcy5jb25maWcud2luZG93UmVzaXplQ2FsbGJhY2soKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGNoYW5nZVBvc2l0aW9uKG5ld1Bvc2l0aW9uOiBUb3BweVBvc2l0aW9uKTogdm9pZCB7XG4gICAgdGhpcy5wb3NpdGlvbiA9IG5ld1Bvc2l0aW9uO1xuICB9XG5cbiAgdXBkYXRlUG9zaXRpb24ocG9zaXRpb25Db25maWc6IGFueSk6IHZvaWQge1xuICAgIHRoaXMucG9zaXRpb24udXBkYXRlQ29uZmlnKHBvc2l0aW9uQ29uZmlnKTtcbiAgfVxuXG4gIHVwZGF0ZUNvbnRlbnQoY29udGVudDogQ29udGVudERhdGEsIHByb3BzOiBDb250ZW50UHJvcHMgPSB7fSk6IHZvaWQge1xuICAgIHRoaXMuY29udGVudCA9IGdldENvbnRlbnQoY29udGVudCwgeyAuLi50aGlzLmNvbnRlbnQucHJvcHMsIC4uLnByb3BzIH0pO1xuICB9XG5cbiAgbGlzdGVuKGV2ZW50TmFtZTogVG9wcHlFdmVudE5hbWUpIHtcbiAgICByZXR1cm4gQnVzLmxpc3Rlbih0aGlzLnRpZCwgZXZlbnROYW1lKTtcbiAgfVxuXG4gIHByaXZhdGUgaXNOb3RIb3N0RWxlbWVudChlbCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHdyYXBwZXJFbCA9IHRoaXMudmlld0VsLnF1ZXJ5U2VsZWN0b3IoJy50LXdyYXBwZXInKTtcbiAgICByZXR1cm4gZWwgIT09IHdyYXBwZXJFbCAmJiAhd3JhcHBlckVsLmNvbnRhaW5zKGVsKTtcbiAgfVxuXG4gIHByaXZhdGUgYXR0YWNoKCk6IHZvaWQge1xuICAgIC8qIGNyZWF0ZSBjb21wb25lbnQgKi9cbiAgICB0aGlzLmNvbXBGYWMgPSB0aGlzLmNvbXBSZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShUb3BweUNvbXBvbmVudCk7XG4gICAgdGhpcy5jb21wUmVmID0gdGhpcy5jb21wRmFjLmNyZWF0ZSh0aGlzLmluamVjdG9yKTtcbiAgICB0aGlzLmNvbXAgPSB0aGlzLmNvbXBSZWYuaW5zdGFuY2U7XG5cbiAgICAvKiBhc3NpZ24gcHJvcHMgKi9cbiAgICBjb25zdCB7IHBvc2l0aW9uLCBjb250ZW50LCBjb25maWcsIHRpZCB9ID0gdGhpcztcbiAgICBjb250ZW50LnByb3BzLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xuICAgIE9iamVjdC5hc3NpZ24odGhpcy5jb21wLCB7IHBvc2l0aW9uLCBjb250ZW50LCBjb25maWcsIHRpZCB9KTtcblxuICAgIC8qIGF0dGFjaCB2aWV3ICovXG4gICAgdGhpcy5ob3N0VmlldyA9IHRoaXMuY29tcFJlZi5ob3N0VmlldztcbiAgICB0aGlzLmFwcFJlZi5hdHRhY2hWaWV3KHRoaXMuaG9zdFZpZXcpO1xuICAgIHRoaXMudmlld0VsID0gKHRoaXMuaG9zdFZpZXcgYXMgYW55KS5yb290Tm9kZXNbMF07XG4gICAgQm9keUVsLmFwcGVuZENoaWxkKHRoaXMudmlld0VsKTtcbiAgfVxuXG4gIHByaXZhdGUgZGV0dGFjaCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaG9zdFZpZXcpIHJldHVybjtcblxuICAgIHRoaXMuYXBwUmVmLmRldGFjaFZpZXcodGhpcy5ob3N0Vmlldyk7XG4gICAgdGhpcy5jb21wUmVmLmRlc3Ryb3koKTtcbiAgICB0aGlzLmhvc3RWaWV3ID0gdGhpcy52aWV3RWwgPSB0aGlzLmNvbXAgPSBudWxsO1xuICB9XG59XG4iLCJpbXBvcnQgeyBBcHBsaWNhdGlvblJlZiwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBJbmplY3RhYmxlLCBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRGVmYXVsdENvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7IENvbnRlbnREYXRhLCBDb250ZW50UHJvcHMsIENvbnRlbnRUeXBlLCBJbnB1dHMsIEluc2lkZVBsYWNlbWVudCwgVElELCBUb3BweUNvbmZpZyB9IGZyb20gJy4vbW9kZWxzJztcbmltcG9ydCB7IEdsb2JhbFBvc2l0aW9uIH0gZnJvbSAnLi9wb3NpdGlvbic7XG5pbXBvcnQgeyBUb3BweVBvc2l0aW9uIH0gZnJvbSAnLi9wb3NpdGlvbi9wb3NpdGlvbic7XG5pbXBvcnQgeyBUb3BweUNvbnRyb2wgfSBmcm9tICcuL3RvcHB5LWNvbnRyb2wnO1xuaW1wb3J0IHsgQnVzLCBjcmVhdGVJZCwgZ2V0Q29udGVudCB9IGZyb20gJy4vdXRpbHMnO1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBUb3BweSB7XG4gIHN0YXRpYyBjb250cm9sczogeyBba2V5OiBzdHJpbmddOiBUb3BweUNvbnRyb2wgfSA9IHt9O1xuICBwcml2YXRlIHRpZDogVElEO1xuICBwcml2YXRlIGlucHV0czogSW5wdXRzID0ge1xuICAgIHBvc2l0aW9uOiBudWxsLFxuICAgIGNvbmZpZzogRGVmYXVsdENvbmZpZyxcbiAgICBjb250ZW50OiB7IHR5cGU6IENvbnRlbnRUeXBlLlNUUklORywgZGF0YTogJ2hlbGxvJywgcHJvcHM6IHt9IH0sXG4gICAgdGlkOiBudWxsXG4gIH07XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IpIHtcbiAgICB0aGlzLmlucHV0cy5wb3NpdGlvbiA9IG5ldyBHbG9iYWxQb3NpdGlvbih7IHBsYWNlbWVudDogSW5zaWRlUGxhY2VtZW50LlRPUCB9KTtcbiAgfVxuXG4gIHBvc2l0aW9uKHBvc2l0aW9uOiBUb3BweVBvc2l0aW9uKTogVG9wcHkge1xuICAgIHRoaXMuaW5wdXRzLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjb25maWcoY29uZmlnOiBQYXJ0aWFsPFRvcHB5Q29uZmlnPik6IFRvcHB5IHtcbiAgICB0aGlzLmlucHV0cy5jb25maWcgPSB7IC4uLkRlZmF1bHRDb25maWcsIC4uLmNvbmZpZyB9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgY29udGVudChkYXRhOiBDb250ZW50RGF0YSwgcHJvcHM6IENvbnRlbnRQcm9wcyA9IHt9KTogVG9wcHkge1xuICAgIHRoaXMuaW5wdXRzLmNvbnRlbnQgPSBnZXRDb250ZW50KGRhdGEsIHByb3BzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGNyZWF0ZShrZXk6IHN0cmluZyA9IG51bGwpOiBUb3BweUNvbnRyb2wge1xuICAgIHRoaXMudGlkID0gdGhpcy5pbnB1dHMudGlkID0ga2V5IHx8IGNyZWF0ZUlkKCk7XG5cbiAgICBjb25zdCBpbmplY3RvciA9IEluamVjdG9yLmNyZWF0ZShcbiAgICAgIFtcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IFRvcHB5Q29udHJvbCxcbiAgICAgICAgICBkZXBzOiBbQXBwbGljYXRpb25SZWYsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgSW5qZWN0b3JdXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICB0aGlzLmluamVjdG9yXG4gICAgKTtcblxuICAgIGNvbnN0IHRjID0gaW5qZWN0b3IuZ2V0KFRvcHB5Q29udHJvbCk7XG4gICAgaWYgKFRvcHB5LmNvbnRyb2xzW3RoaXMudGlkXSkge1xuICAgICAgdGhpcy50aWQgPSBjcmVhdGVJZCgpO1xuICAgIH1cbiAgICB0aGlzLmlucHV0cy5wb3NpdGlvbi5pbml0KHRoaXMudGlkKTtcbiAgICBUb3BweS5jb250cm9sc1t0aGlzLnRpZF0gPSBPYmplY3QuYXNzaWduKHRjLCB0aGlzLmlucHV0cyk7XG4gICAgcmV0dXJuIHRjO1xuICB9XG5cbiAgZ2V0Q3RybCh0aWQ6IFRJRCk6IFRvcHB5Q29udHJvbCB7XG4gICAgcmV0dXJuIFRvcHB5LmNvbnRyb2xzW3RpZF07XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpmb3JpblxuICAgIGZvciAoY29uc3Qga2V5IGluIFRvcHB5LmNvbnRyb2xzKSB7XG4gICAgICBUb3BweS5jb250cm9sc1trZXldLmNsb3NlKCk7XG4gICAgfVxuICAgIFRvcHB5LmNvbnRyb2xzID0ge307XG4gICAgQnVzLnN0b3AoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBUb3BweUNvbXBvbmVudCB9IGZyb20gJy4vdG9wcHkuY29tcG9uZW50JztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZV0sXG4gIGRlY2xhcmF0aW9uczogW1RvcHB5Q29tcG9uZW50XSxcbiAgZW50cnlDb21wb25lbnRzOiBbVG9wcHlDb21wb25lbnRdXG59KVxuZXhwb3J0IGNsYXNzIFRvcHB5TW9kdWxlIHt9XG4iXSwibmFtZXMiOlsidHNsaWJfMS5fX2V4dGVuZHMiLCJUZW1wbGF0ZVJlZiIsIlN1YmplY3QiLCJmaWx0ZXIiLCJtYXAiLCJ0c2xpYl8xLl9fdmFsdWVzIiwiSW5qZWN0b3IiLCJzdGFydFdpdGgiLCJ0YWtlVW50aWwiLCJ0YXAiLCJDb21wb25lbnQiLCJDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSIsIkNoYW5nZURldGVjdG9yUmVmIiwiQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyIiwiRWxlbWVudFJlZiIsIlZpZXdDaGlsZCIsIlZpZXdDb250YWluZXJSZWYiLCJtZXJnZU9icyIsImZyb21FdmVudCIsInNraXBXaGlsZSIsImRlYm91bmNlVGltZSIsIm9ic2VydmVPbiIsImFuaW1hdGlvbkZyYW1lU2NoZWR1bGVyIiwiZGlzdGluY3RVbnRpbENoYW5nZWQiLCJB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